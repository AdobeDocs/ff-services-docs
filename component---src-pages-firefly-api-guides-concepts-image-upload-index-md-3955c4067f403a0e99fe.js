"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[854],{70908:function(e,n,a){a.r(n),a.d(n,{_frontmatter:function(){return d},default:function(){return m}});var o=a(58168),t=a(80045),r=(a(88763),a(15680)),s=a(83407);const i=["components"],d={},l={_frontmatter:d},p=s.A;function m(e){let{components:n}=e,a=(0,t.A)(e,i);return(0,r.mdx)(p,(0,o.A)({},l,a,{components:n,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"image-upload"},"Image Upload"),(0,r.mdx)("p",null,"Use Images with Firefly APIs"),(0,r.mdx)("h2",{id:"overview"},"Overview"),(0,r.mdx)("p",null,"Some Firefly APIs require images to be uploaded as part of their transactions. The Firefly API offers two options for uploading images:"),(0,r.mdx)("ol",null,(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("strong",{parentName:"li"},"Upload Endpoint:")," Use Firefly's Upload Endpoint to upload an image from local storage. This operation generates an image ID that can be used in API calls."),(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("strong",{parentName:"li"},"Pre-signed URLs:")," Have Firefly APIs read from ",(0,r.mdx)("strong",{parentName:"li"},"Azure"),", ",(0,r.mdx)("strong",{parentName:"li"},"AWS"),", or ",(0,r.mdx)("strong",{parentName:"li"},"Dropbox")," pre-signed URLs.")),(0,r.mdx)("h2",{id:"using-the-upload-endpoint"},"Using the Upload Endpoint"),(0,r.mdx)("p",null,"The Firefly Upload Endpoint allows you to upload images directly from local storage. After uploading, an image ID is returned, which you can use for subsequent API operations."),(0,r.mdx)("h3",{id:"prerequisites"},"Prerequisites"),(0,r.mdx)("p",null,"This tutorial assumes you have worked with your Adobe Representative and have the following:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"An ",(0,r.mdx)("a",{parentName:"li",href:"https://developer.adobe.com/console/786177/home"},"Adobe Developer Console")," account."),(0,r.mdx)("li",{parentName:"ul"},"A ",(0,r.mdx)("a",{parentName:"li",href:"https://developer.adobe.com/developer-console/docs/guides/projects/projects-empty/"},"project")," with Firefly API ",(0,r.mdx)("a",{parentName:"li",href:"https://developer.adobe.com/developer-console/docs/guides/services/services-add-api-oauth-s2s/"},"OAuth Server-to-Server credentials set up"),"."),(0,r.mdx)("li",{parentName:"ul"},"Access to your Client ID and Client Secret from the ",(0,r.mdx)("a",{parentName:"li",href:"https://developer.adobe.com/developer-console/docs/guides/services/services-add-api-oauth-s2s/#api-overview"},"Adobe Developer Console project"),". Securely store these credentials and never expose them in client-side or public code."),(0,r.mdx)("li",{parentName:"ul"},"A ",(0,r.mdx)("a",{parentName:"li",href:"https://developer.adobe.com/developer-console/docs/guides/services/services-add-api-oauth-s2s/#api-overview"},"Generated access token"))),(0,r.mdx)("h3",{id:"upload-source-image"},"Upload Source Image"),(0,r.mdx)("p",null,"Below is a JavaScript example using ",(0,r.mdx)("inlineCode",{parentName:"p"},"axios")," to upload an image using Firefly's Upload API:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-javascript"},"const axios = require(\"axios\");\nconst fs = require('fs');\n\nasync function uploadImage({ filePath, fileType, accessToken }) {\n  let stream = fs.createReadStream(filePath);\n  let stats = fs.statSync(filePath);\n  let fileSizeInBytes = stats.size;\n\n  const config = {\n    method: 'post',\n    url: 'https://firefly-api.adobe.io/v2/storage/image',\n    headers: {\n      'Authorization': `Bearer ${accessToken}`,\n      'X-API-Key': process.env.FIREFLY_SERVICES_CLIENT_ID,\n      'Content-Type': fileType,\n      'Content-Length': fileSizeInBytes,\n    },\n    data: stream,\n    maxContentLength: Infinity,\n    maxBodyLength: Infinity,\n  };\n\n  const response = await axios(config);\n  return response.data;\n}\n\n// Example usage\nuploadImage({\n  filePath: './example-image.png',\n  fileType: 'image/png',\n  accessToken: 'YOUR_ACCESS_TOKEN'\n}).then(response => {\n  console.log(response);\n}).catch(error => {\n  console.error(error);\n});\n")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Example Response:")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "images": [\n    {\n      "id": "510aabb4-e154-4a7b-bd2e-f492ee71c938"\n    }\n  ]\n}\n')),(0,r.mdx)("p",null,"You can now use this ",(0,r.mdx)("inlineCode",{parentName:"p"},"id")," in subsequent Firefly API requests. The upload id is valid for ",(0,r.mdx)("strong",{parentName:"p"},"7 days")," from the date of upload."),(0,r.mdx)("h2",{id:"pre-signed-urls"},"Pre-signed URLs"),(0,r.mdx)("p",null,"If you prefer not to use the Firefly Upload Endpoint, you can reference images hosted on supported platforms via pre-signed URLs. The currently supported domains are:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"*.amazonaws.com")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"*.windows.net")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"*.dropboxusercontent.com"))),(0,r.mdx)("h2",{id:"image-formats"},"Image Formats"),(0,r.mdx)("p",null,"Supported formats include ",(0,r.mdx)("inlineCode",{parentName:"p"},"image/jpeg"),", ",(0,r.mdx)("inlineCode",{parentName:"p"},"image/png"),", and ",(0,r.mdx)("inlineCode",{parentName:"p"},"image/webp"),"."))}m.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-firefly-api-guides-concepts-image-upload-index-md-3955c4067f403a0e99fe.js.map