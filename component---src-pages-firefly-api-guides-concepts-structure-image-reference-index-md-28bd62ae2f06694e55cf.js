"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[6442],{28406:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return d},default:function(){return u}});var n=a(58168),r=a(80045),i=(a(88763),a(15680)),s=a(83407);const c=["components"],d={},o=(m="InlineAlert",function(e){return console.warn("Component "+m+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.mdx)("div",e)});var m;const l={_frontmatter:d},p=s.A;function u(e){let{components:t}=e,a=(0,r.A)(e,c);return(0,i.mdx)(p,(0,n.A)({},l,a,{components:t,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"structure-reference-images"},"Structure Reference Images"),(0,i.mdx)("p",null,"Use Structure Reference to generate images with structural similarities."),(0,i.mdx)("table",null,(0,i.mdx)("thead",{parentName:"table"},(0,i.mdx)("tr",{parentName:"thead"},(0,i.mdx)("th",{parentName:"tr",align:null}),(0,i.mdx)("th",{parentName:"tr",align:null}))),(0,i.mdx)("tbody",{parentName:"table"},(0,i.mdx)("tr",{parentName:"tbody"},(0,i.mdx)("td",{parentName:"tr",align:null},(0,i.mdx)("span",{parentName:"td",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"100%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/ff-services-docs/static/b0fc0b63da81647036c9fdad705c972b/5530d/structure-image-reference-mountain.webp 320w","/ff-services-docs/static/b0fc0b63da81647036c9fdad705c972b/0c8fb/structure-image-reference-mountain.webp 640w","/ff-services-docs/static/b0fc0b63da81647036c9fdad705c972b/94b1e/structure-image-reference-mountain.webp 1280w","/ff-services-docs/static/b0fc0b63da81647036c9fdad705c972b/0b34d/structure-image-reference-mountain.webp 1920w","/ff-services-docs/static/b0fc0b63da81647036c9fdad705c972b/96d48/structure-image-reference-mountain.webp 2048w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/ff-services-docs/static/b0fc0b63da81647036c9fdad705c972b/8980b/structure-image-reference-mountain.jpg 320w","/ff-services-docs/static/b0fc0b63da81647036c9fdad705c972b/56d4e/structure-image-reference-mountain.jpg 640w","/ff-services-docs/static/b0fc0b63da81647036c9fdad705c972b/62aaf/structure-image-reference-mountain.jpg 1280w","/ff-services-docs/static/b0fc0b63da81647036c9fdad705c972b/aaf92/structure-image-reference-mountain.jpg 1920w","/ff-services-docs/static/b0fc0b63da81647036c9fdad705c972b/09658/structure-image-reference-mountain.jpg 2048w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/jpeg"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/ff-services-docs/static/b0fc0b63da81647036c9fdad705c972b/62aaf/structure-image-reference-mountain.jpg",alt:"mountain",title:"mountain",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")," ",(0,i.mdx)("p",{style:{textAlign:"center"}},"Structure Reference Image")),(0,i.mdx)("td",{parentName:"tr",align:null},(0,i.mdx)("span",{parentName:"td",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"100%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/ff-services-docs/static/fdeca316ece18b0c1f1d7d68dd8b485a/5530d/structure-image-reference-volcano.webp 320w","/ff-services-docs/static/fdeca316ece18b0c1f1d7d68dd8b485a/0c8fb/structure-image-reference-volcano.webp 640w","/ff-services-docs/static/fdeca316ece18b0c1f1d7d68dd8b485a/94b1e/structure-image-reference-volcano.webp 1280w","/ff-services-docs/static/fdeca316ece18b0c1f1d7d68dd8b485a/0b34d/structure-image-reference-volcano.webp 1920w","/ff-services-docs/static/fdeca316ece18b0c1f1d7d68dd8b485a/96d48/structure-image-reference-volcano.webp 2048w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/ff-services-docs/static/fdeca316ece18b0c1f1d7d68dd8b485a/8980b/structure-image-reference-volcano.jpg 320w","/ff-services-docs/static/fdeca316ece18b0c1f1d7d68dd8b485a/56d4e/structure-image-reference-volcano.jpg 640w","/ff-services-docs/static/fdeca316ece18b0c1f1d7d68dd8b485a/62aaf/structure-image-reference-volcano.jpg 1280w","/ff-services-docs/static/fdeca316ece18b0c1f1d7d68dd8b485a/aaf92/structure-image-reference-volcano.jpg 1920w","/ff-services-docs/static/fdeca316ece18b0c1f1d7d68dd8b485a/09658/structure-image-reference-volcano.jpg 2048w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/jpeg"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/ff-services-docs/static/fdeca316ece18b0c1f1d7d68dd8b485a/62aaf/structure-image-reference-volcano.jpg",alt:"volcano",title:"volcano",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")," ",(0,i.mdx)("p",{style:{textAlign:"center"}},"Generated Image"))))),(0,i.mdx)("h2",{id:"understanding-fireflys-structure-reference"},"Understanding Firefly's Structure Reference"),(0,i.mdx)("p",null,"Structure Reference uses a reference image to apply structural characteristics (like image outline and depth) to newly generated images with different details, styles, or moods. This feature, along with ",(0,i.mdx)("a",{parentName:"p",href:"../style-image-reference/index.md"},"Firefly's Style Reference"),", gives you more control of image generation beyond the text prompt."),(0,i.mdx)("p",null,"Firefly's Image APIs implement this feature by using the ",(0,i.mdx)("inlineCode",{parentName:"p"},"structure")," parameter, with two properties:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"strength"),": A value between ",(0,i.mdx)("inlineCode",{parentName:"li"},"1")," and ",(0,i.mdx)("inlineCode",{parentName:"li"},"100")," that determines how closely the generated image resembles the reference image. When ",(0,i.mdx)("inlineCode",{parentName:"li"},"strength")," isn't specified, the default value is ",(0,i.mdx)("inlineCode",{parentName:"li"},"50"),"."),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"imageReference"),": An object containing the source for the reference image.")),(0,i.mdx)("h2",{id:"concepts-in-action"},"Concepts in action"),(0,i.mdx)(o,{variant:"warning",slots:"header, text",mdxType:"InlineAlert"}),(0,i.mdx)("p",null,"Before you start"),(0,i.mdx)("p",null,"You'll need a Firefly ",(0,i.mdx)("strong",{parentName:"p"},"Client ID")," and ",(0,i.mdx)("strong",{parentName:"p"},"Access Token")," for this exercise. Learn how to retrieve them in the ",(0,i.mdx)("a",{parentName:"p",href:"../authentication/index.md"},"Authentication Guide"),". ",(0,i.mdx)("strong",{parentName:"p"},"Securely store these credentials and never expose them in client-side or public code.")),(0,i.mdx)("h3",{id:"specifying-strength"},"Specifying strength"),(0,i.mdx)("p",null,"Use the ",(0,i.mdx)("inlineCode",{parentName:"p"},"strength")," value to influence the resemblance of newly generated images."),(0,i.mdx)("ol",null,(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},'First, let\'s use the reference image of the mountain from the example at the top of this page. Right-click the "Structure Reference Image" and save it to your desktop.')),(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"Next, upload the saved image to Firefly's storage API. Be sure to edit the ",(0,i.mdx)("inlineCode",{parentName:"p"},"--data-binary")," path in the command below:"))),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"curl --location 'https://firefly-api.adobe.io/v2/storage/image' \\\n--header 'Content-Type: image/webp' \\\n--header 'Accept: application/json' \\\n--header \"x-api-key: $FIREFLY_SERVICES_CLIENT_ID\" \\\n--header \"Authorization: Bearer $FIREFLY_SERVICES_ACCESS_TOKEN\" \\\n--data-binary '@/Users/<YOUR_MACHINE_USER_NAME>/Desktop/structure-image-reference-mountain.webp'\n")),(0,i.mdx)("p",null,"The response will look like this:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{"images":[{"id":"0eb8584a-b850-4c4c-a234-185d6378ecb6"}]}  //Your images.id here will be unique\n')),(0,i.mdx)("ol",{start:3},(0,i.mdx)("li",{parentName:"ol"},"Export the ID so that the next script can easily access it:")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"export FIREFLY_UPLOAD_ID=<YOUR_images.id>\n")),(0,i.mdx)("ol",{start:4},(0,i.mdx)("li",{parentName:"ol"},"Generate a new image based on the uploaded image. Use the command below to see how the ",(0,i.mdx)("inlineCode",{parentName:"li"},"strength")," parameter influences the resemblance of the generated image.\nStart with a ",(0,i.mdx)("inlineCode",{parentName:"li"},"strength")," value of ",(0,i.mdx)("inlineCode",{parentName:"li"},"100"),", then experiment with other values.")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},'curl --location \'https://firefly-api.adobe.io/v3/images/generate-async\' \\\n--header \'Content-Type: application/json\' \\\n--header \'Accept: application/json\' \\\n--header "x-api-key: $FIREFLY_SERVICES_CLIENT_ID" \\\n--header "Authorization: Bearer $FIREFLY_SERVICES_ACCESS_TOKEN" \\\n--data \'{\n  "numVariations": 4,\n  "prompt": "a photo of a volcano",\n  "structure": {\n    "strength": 100,\n    "imageReference": {\n      "source": {\n        "uploadId": "\'$FIREFLY_UPLOAD_ID\'"\n      }\n    }\n  }\n}\'\n')),(0,i.mdx)("p",null,"The request returns a rapid response for the asynchronous job:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{   \n    "jobId":"<YOUR_JOB_ID>",\n    "statusUrl":"https://firefly-epo854211.adobe.io/v3/status/urn:ff:jobs:...",\n    "cancelUrl":"https://firefly-epo854211.adobe.io/v3/cancel/urn:ff:jobs:..."\n}\n')),(0,i.mdx)("ol",{start:5},(0,i.mdx)("li",{parentName:"ol"},"Use the ",(0,i.mdx)("inlineCode",{parentName:"li"},"jobId")," to see the result:")),(0,i.mdx)(o,{variant:"info",slots:"header, text",mdxType:"InlineAlert"}),(0,i.mdx)("p",null,"NOTE"),(0,i.mdx)("p",null,"The ",(0,i.mdx)("inlineCode",{parentName:"p"},"numVariations")," value creates four generated images that will be easy to compare. Four URLs are returned in the response."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},'curl -X GET "https://firefly-api.adobe.io/v3/status/<YOUR_JOB_ID>" \\\n    -H "x-api-key: $FIREFLY_SERVICES_CLIENT_ID" \\\n    -H "Authorization: Bearer $FIREFLY_SERVICES_ACCESS_TOKEN" \\\n    -H "Content-Type: application/json"\n')))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-firefly-api-guides-concepts-structure-image-reference-index-md-28bd62ae2f06694e55cf.js.map