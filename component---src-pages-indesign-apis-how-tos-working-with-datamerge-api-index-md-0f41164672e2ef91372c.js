"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[570],{11590:function(e,a,t){t.r(a),t.d(a,{_frontmatter:function(){return d},default:function(){return c}});var n=t(58168),r=t(80045),i=(t(88763),t(15680)),s=t(83407);const o=["components"],d={},p={_frontmatter:d},m=s.A;function c(e){let{components:a}=e,t=(0,r.A)(e,o);return(0,i.mdx)(m,(0,n.A)({},p,t,{components:a,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"working-with-the-data-merge-api"},"Working with the Data Merge API"),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"42.1875%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/ff-services-docs/static/f4da4f9eaef424ab5f8c439f9be6c4a2/5530d/image3.webp 320w","/ff-services-docs/static/f4da4f9eaef424ab5f8c439f9be6c4a2/0c8fb/image3.webp 640w","/ff-services-docs/static/f4da4f9eaef424ab5f8c439f9be6c4a2/94b1e/image3.webp 1280w","/ff-services-docs/static/f4da4f9eaef424ab5f8c439f9be6c4a2/37c77/image3.webp 1430w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/ff-services-docs/static/f4da4f9eaef424ab5f8c439f9be6c4a2/dd4a7/image3.png 320w","/ff-services-docs/static/f4da4f9eaef424ab5f8c439f9be6c4a2/0f09e/image3.png 640w","/ff-services-docs/static/f4da4f9eaef424ab5f8c439f9be6c4a2/bbbf7/image3.png 1280w","/ff-services-docs/static/f4da4f9eaef424ab5f8c439f9be6c4a2/1d7f3/image3.png 1430w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/ff-services-docs/static/f4da4f9eaef424ab5f8c439f9be6c4a2/bbbf7/image3.png",alt:"Data Merge",title:"Data Merge",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("p",null,"Data merge generates variations of a template document\nfrom data in a provided CSV file."),(0,i.mdx)("p",null,"The Data Merge API supports UTF-16BE encoding for CSV files, which is necessary for languages or characters requiring multi-byte representation. For plain English characters, the CSV will function correctly even without this encoding."),(0,i.mdx)("p",null,"The ",(0,i.mdx)("a",{parentName:"p",href:"../../api/datamerge.md"},"Data Merge API")," includes two components to complete the task: the data merge and the data merge tags."),(0,i.mdx)("h2",{id:"quickstart"},"Quickstart"),(0,i.mdx)("p",null,"The example below takes the data from ",(0,i.mdx)("inlineCode",{parentName:"p"},"Directory_Names.csv")," and creates different variations of ",(0,i.mdx)("inlineCode",{parentName:"p"},"dataMergeTemplate.indd"),". The\noutput is a merged INDD file of all variations."),(0,i.mdx)("h3",{id:"merge-data"},"Merge data"),(0,i.mdx)("p",null,"This cURL command merges the data (from ",(0,i.mdx)("inlineCode",{parentName:"p"},"Directory_Names.csv")," into ",(0,i.mdx)("inlineCode",{parentName:"p"},"dataMergeTemplate.indd"),")."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-curl"},'curl --location --request POST \'https://indesign.adobe.io/v3/merge-data\' \\\n--header \'Authorization: Bearer {YOUR_OAUTH_TOKEN}\' \\\n--header \'x-api-key: {YOUR_API_KEY}\' \\\n--header \'Content-Type: application/json\' \\\n--data-raw \'{\n  "assets": [\n    {\n      "source": {\n        "url": "{PRE-SIGNED_URL}",\n        "storageType": "Azure"\n      },\n      "destination": "dataMergeTemplate.indd"\n    },\n    {\n      "source": {\n        "url": "{PRE-SIGNED_URL}",\n        "storageType": "Azure"\n      },\n      "destination": "Directory_Names.csv"\n    }\n  ],\n  "params": {\n    "targetDocument": "dataMergeTemplate.indd",\n    "outputMediaType": "application/x-indesign",\n    "outputFolderPath": "outputfolder",\n    "outputFileBaseString": "merged",\n    "dataSource": "Directory_Names.csv"\n  },\n  "outputs": [\n    {\n      "destination": {\n        "url": "{PUT-SIGNED_URL}"\n      },\n      "source": "outputfolder/merged.pdf"\n    }\n  ]\n}\'\n')),(0,i.mdx)("p",null,"The raw data may include three\nparts:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"assets")," - Input assets for the request."),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"params")," - Information about what to do with the input assets."),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"outputs")," - Specify locations where the output assets are uploaded. Without an ",(0,i.mdx)("inlineCode",{parentName:"li"},"outputs")," parameter, the output assets are stored in a temporary\nrepository, and a ",(0,i.mdx)("a",{parentName:"li",href:"/ff-services-docs/indesign-apis/concepts/#pre-signed-urls"},"pre-signed URL")," will be shared for those assets, which will be valid for 24hrs.")),(0,i.mdx)("p",null,"Consult this skeleton ",(0,i.mdx)("a",{parentName:"p",href:"https://developer.adobe.com/commerce/webapi/get-started/gs-curl/"},"cURL request")," for more details."),(0,i.mdx)("h3",{id:"retrieve-data-merge-tags"},"Retrieve data merge tags"),(0,i.mdx)("p",null,"This cURL command retrieves the data merge tags from the document."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-curl"},'curl --location --request POST \'https://indesign.adobe.io/v3/merge-data-tags\' \\\n--header \'Authorization: Bearer {YOUR_OAUTH_TOKEN}\' \\\n--header \'x-api-key: {YOUR_API_KEY}\' \\\n--header \'Content-Type: application/json\' \\\n--data-raw \'{\n  "assets": [\n    {\n      "source": {\n        "url": "{PRE-SIGNED_URL}",\n        "storageType": "Azure"\n      },\n      "destination": "dataMergeTemplate.indd"\n    },\n    {\n      "source": {\n        "url": "{PRE-SIGNED_URL}",\n        "storageType": "Azure"\n      },\n      "destination": "batang.ttc"\n    }\n  ],\n  "params": {\n    "outputMediaType": "application/x-indesign",\n    "targetDocument": "dataMergeTemplate.indd",\n    "includePageItemIdentifiers": true\n  }\n}\'\n')))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-indesign-apis-how-tos-working-with-datamerge-api-index-md-0f41164672e2ef91372c.js.map