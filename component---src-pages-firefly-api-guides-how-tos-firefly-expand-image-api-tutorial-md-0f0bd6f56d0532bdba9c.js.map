{"version":3,"file":"component---src-pages-firefly-api-guides-how-tos-firefly-expand-image-api-tutorial-md-0f0bd6f56d0532bdba9c.js","mappings":"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","sources":["webpack://dev-site-documentation-template/./src/pages/firefly-api/guides/how-tos/firefly-expand-image-api-tutorial.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/ff-services-docs/ff-services-docs/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"firefly-expand-image-api-tutorial\"\n    }}>{`Firefly Expand Image API Tutorial`}</h1>\n    <p>{`Generatively expand an image out beyond its edges with the `}<a parentName=\"p\" {...{\n        \"href\": \"../api/generative_expand/V3/\"\n      }}>{`Expand Image API`}</a></p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"1024px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"50%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\",\n            \"transition\": \"opacity 0.5s 0.5s\",\n            \"pointerEvents\": \"none\"\n          }\n        }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/93eb9dddd127c56ea7cfab1de99911b6/5530d/expand-image-tutorial-hero-image.webp 320w\", \"/ff-services-docs/static/93eb9dddd127c56ea7cfab1de99911b6/0c8fb/expand-image-tutorial-hero-image.webp 640w\", \"/ff-services-docs/static/93eb9dddd127c56ea7cfab1de99911b6/d71bc/expand-image-tutorial-hero-image.webp 1024w\"],\n            \"sizes\": \"(max-width: 1024px) 100vw, 1024px\",\n            \"type\": \"image/webp\"\n          }}></source>{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/93eb9dddd127c56ea7cfab1de99911b6/8980b/expand-image-tutorial-hero-image.jpg 320w\", \"/ff-services-docs/static/93eb9dddd127c56ea7cfab1de99911b6/56d4e/expand-image-tutorial-hero-image.jpg 640w\", \"/ff-services-docs/static/93eb9dddd127c56ea7cfab1de99911b6/63217/expand-image-tutorial-hero-image.jpg 1024w\"],\n            \"sizes\": \"(max-width: 1024px) 100vw, 1024px\",\n            \"type\": \"image/jpeg\"\n          }}></source>{`\n          `}<img parentName=\"picture\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"src\": \"/ff-services-docs/static/93eb9dddd127c56ea7cfab1de99911b6/63217/expand-image-tutorial-hero-image.jpg\",\n            \"alt\": \"wallet advertisement hero image\",\n            \"title\": \"wallet advertisement hero image\",\n            \"loading\": \"lazy\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"opacity\": \"0\",\n              \"transition\": \"opacity 0.5s\",\n              \"color\": \"inherit\",\n              \"boxShadow\": \"inset 0px 0px 0px 400px none\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            }\n          }}></img>{`\n        `}</picture>{`\n    `}</span></p>\n    <h2 {...{\n      \"id\": \"overview\"\n    }}>{`Overview`}</h2>\n    <p>{`In this tutorial, imagine we are working on a marketing campaign at a Fortune 100 company, and we need to create differently sized image variations optimized for various social media platforms. In the past we had to manually resize images for each platform, which was time-consuming and error-prone. With Firefly's Expand Image API, we can automate this process and generate multiple variations of images with dimensions optimized for platforms like Instagram, Facebook, Twitter, and more.`}</p>\n    <p>{`Before diving into the code, let's preview the high-level steps:`}</p>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`Define Target Dimensions:`}</strong>{` Each social media platform has specific image size requirements. We define these dimensions for the platforms we plan to target.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`Upload Source Image:`}</strong>{` Use Firefly's `}<a parentName=\"li\" {...{\n          \"href\": \"../api/upload_image/V2/\"\n        }}>{`Upload API`}</a>{` to upload your original image.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`Generate Image Variations:`}</strong>{` Use Firefly's `}<a parentName=\"li\" {...{\n          \"href\": \"../api/generative_expand/V3/\"\n        }}>{`Expand Image API`}</a>{` to create resized variations of the image for each dimension.`}</li>\n    </ul>\n    <p>{`Depending on your learning style, you may prefer to walk through this tutorial step-by-step or `}<a parentName=\"p\" {...{\n        \"href\": \"#full-example\"\n      }}>{`jump immediately to the full source code`}</a>{`.`}</p>\n    <h2 {...{\n      \"id\": \"prerequisites\"\n    }}>{`Prerequisites`}</h2>\n    <p>{`This tutorial assumes you possess a Firefly Services `}<strong parentName=\"p\">{`Client ID`}</strong>{` and `}<strong parentName=\"p\">{`Client Secret`}</strong>{`. If you don't have these credentials, learn how to get them at the `}<a parentName=\"p\" {...{\n        \"href\": \"../concepts/dev-console\"\n      }}>{`Adobe Developer Console`}</a>{` page.`}</p>\n    <h3 {...{\n      \"id\": \"set-up-your-environment\"\n    }}>{`Set Up Your Environment`}</h3>\n    <p>{`Before we begin this `}<a parentName=\"p\" {...{\n        \"href\": \"https://nodejs.org/en/download/package-manager\"\n      }}>{`Node.js`}</a>{` tutorial, run the following in a secure terminal:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`export FIREFLY_SERVICES_CLIENT_ID=yourClientIdAsdf123\nexport FIREFLY_SERVICES_CLIENT_SECRET=yourClientSecretAsdf123\n\nmkdir firefly-expand-image-api-tutorial\ncd firefly-expand-image-api-tutorial\nnpm init --y\nnpm install axios qs\ntouch index.js\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"download-the-sample-image\"\n    }}>{`Download the Sample Image`}</h3>\n    <p>{`Save this sample image to your project folder:`}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"1280px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"128.43749999999997%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\",\n            \"transition\": \"opacity 0.5s 0.5s\",\n            \"pointerEvents\": \"none\"\n          }\n        }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/021c4fbc74dee98bd1452072edbb4bed/5530d/expand-image-tutorial-source-image.webp 320w\", \"/ff-services-docs/static/021c4fbc74dee98bd1452072edbb4bed/0c8fb/expand-image-tutorial-source-image.webp 640w\", \"/ff-services-docs/static/021c4fbc74dee98bd1452072edbb4bed/94b1e/expand-image-tutorial-source-image.webp 1280w\", \"/ff-services-docs/static/021c4fbc74dee98bd1452072edbb4bed/a4772/expand-image-tutorial-source-image.webp 1792w\"],\n            \"sizes\": \"(max-width: 1280px) 100vw, 1280px\",\n            \"type\": \"image/webp\"\n          }}></source>{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/021c4fbc74dee98bd1452072edbb4bed/8980b/expand-image-tutorial-source-image.jpg 320w\", \"/ff-services-docs/static/021c4fbc74dee98bd1452072edbb4bed/56d4e/expand-image-tutorial-source-image.jpg 640w\", \"/ff-services-docs/static/021c4fbc74dee98bd1452072edbb4bed/62aaf/expand-image-tutorial-source-image.jpg 1280w\", \"/ff-services-docs/static/021c4fbc74dee98bd1452072edbb4bed/fa7d1/expand-image-tutorial-source-image.jpg 1792w\"],\n            \"sizes\": \"(max-width: 1280px) 100vw, 1280px\",\n            \"type\": \"image/jpeg\"\n          }}></source>{`\n          `}<img parentName=\"picture\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"src\": \"/ff-services-docs/static/021c4fbc74dee98bd1452072edbb4bed/62aaf/expand-image-tutorial-source-image.jpg\",\n            \"alt\": \"expand-image-tutorial-source-image.webp\",\n            \"title\": \"expand-image-tutorial-source-image.webp\",\n            \"loading\": \"lazy\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"opacity\": \"0\",\n              \"transition\": \"opacity 0.5s\",\n              \"color\": \"inherit\",\n              \"boxShadow\": \"inset 0px 0px 0px 400px none\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            }\n          }}></img>{`\n        `}</picture>{`\n    `}</span></p>\n    <h2 {...{\n      \"id\": \"define-the-dimensions\"\n    }}>{`Define the Dimensions`}</h2>\n    <p>{`First, let's define the image dimensions for each social media platform:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`const SOCIAL_MEDIA_PLATFORMS = [\n  {\n    name: 'Instagram Post',\n    width: 1080,\n    height: 1080,\n  },\n  {\n    name: 'Facebook Cover',\n    width: 820,\n    height: 312,\n  },\n  {\n    name: 'Twitter Post',\n    width: 1024,\n    height: 512,\n  }\n];\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"upload-the-source-image\"\n    }}>{`Upload the Source Image`}</h2>\n    <p>{` Next, let's upload our source image using Firefly's `}<a parentName=\"p\" {...{\n        \"href\": \"../api/upload_image/V2/\"\n      }}>{`Upload API`}</a>{`. This image serves as the starting point for all variations.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`const axios = require(\"axios\");\nconst fs = require('fs');\n\nasync function uploadImage({ filePath, fileType, accessToken }) {\n  let stream = fs.createReadStream(filePath);\n  let stats = fs.statSync(filePath);\n  let fileSizeInBytes = stats.size;\n\n  const config = {\n    method: 'post',\n    url: 'https://firefly-api.adobe.io/v2/storage/image',\n    headers: {\n      'Authorization': \\`Bearer \\${accessToken}\\`,\n      'X-API-Key': process.env.FIREFLY_SERVICES_CLIENT_ID,\n      'Content-Type': fileType,\n      'Content-Length': fileSizeInBytes,\n    },\n    data: fileStream,\n    maxContentLength: Infinity,\n    maxBodyLength: Infinity,\n  };\n\n  const response = await axios(config);\n  return response.data;\n}\n`}</code></pre>\n    <p>{`On success, the response looks similar to this:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"images\":\n    [\n      {\n        \"id\": \"510aabb4-e154-4a7b-bd2e-f492ee71c938\" \n    }\n  ]\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"generate-image-variations\"\n    }}>{`Generate Image Variations`}</h2>\n    <p>{`Next, let's create a function that generates images for each social media platform with Firefly's `}<a parentName=\"p\" {...{\n        \"href\": \"../api/generative_expand/V3/\"\n      }}>{`Expand Image API`}</a>{`. We use the `}<inlineCode parentName=\"p\">{`axios`}</inlineCode>{` library to make HTTPs requests:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`const axios = require('axios');\n\nasync function genExpand({ imageId, width, height, accessToken }) {\n  const body = {\n    size: { width, height },\n    image: { \n      source: { uploadId: imageId }\n    }\n  }\n\n  const config = {\n    method: 'post',\n    url: 'https://firefly-api.adobe.io/v3/images/expand',\n    headers: {\n      'X-Api-Key': process.env.FIREFLY_SERVICES_CLIENT_ID,\n      'Authorization': \\`Bearer \\${accessToken}\\`,\n      'Content-Type': 'application/json',\n    },\n    data: JSON.stringify(body),\n  };\n\n  const response = await axios(config);\n  return response.data;\n}\n`}</code></pre>\n    <p>{`We can expand the image to fit each social media platform's optimized dimensions and log the URL of the generated image:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`async function createSocialMediaRenditions(accessToken) {\n  // Upload the source image\n  let upload = await uploadImage('./expand-image-tutorial-source-image.webp', 'image/webp', accessToken);\n  let sourceImageId = upload.images[0].id;\n\n  // Iterate over each platform and generate renditions\n  for (let platform of SOCIAL_MEDIA_PLATFORMS) {\n    let result = await genExpand(\n      sourceImageId,\n      platform.width,\n      platform.height,\n      accessToken\n    );\n\n    console.log(\\`Generated image variation for \\${platform.name} at \\${result.outputs[0].image.url}\\`);\n  }\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"full-example\"\n    }}>{`Full Example`}</h2>\n    <p>{`You can review the `}<a parentName=\"p\" {...{\n        \"href\": \"#prerequisites\"\n      }}>{`prerequisites`}</a>{` section to understand how to set up your environment prior to running this code. Note that this is an example only and is not production-ready and requires additional error handling, logging, security measures, and more before you can run it at scale in a live application.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`const axios = require(\"axios\");\nconst qs = require(\"qs\");\nconst fs = require(\"fs\");\n\n// Define social media platforms and their image dimensions\nconst SOCIAL_MEDIA_PLATFORMS = [\n  {\n    name: \"Instagram Post\",\n    width: 1080,\n    height: 1080,\n  },\n  {\n    name: \"Facebook Cover\",\n    width: 820,\n    height: 312,\n  },\n  {\n    name: \"Twitter Post\",\n    width: 1024,\n    height: 512,\n  },\n];\n\n(async () => {\n  const accessToken = await retrieveAccessToken();\n  await createSocialMediaRenditions(accessToken);\n})();\n\nasync function retrieveAccessToken() {\n  let data = qs.stringify({\n    grant_type: \"client_credentials\",\n    client_id: process.env.FIREFLY_SERVICES_CLIENT_ID,\n    client_secret: process.env.FIREFLY_SERVICES_CLIENT_SECRET,\n    scope:\n      \"openid,AdobeID,session,additional_info,read_organizations,firefly_api,ff_apis\",\n  });\n\n  let config = {\n    method: \"post\",\n    maxBodyLength: Infinity,\n    url: \"https://ims-na1.adobelogin.com/ims/token/v3\",\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\n    },\n    data: data,\n  };\n\n  try {\n    const response = await axios.request(config);\n    const { access_token } = response.data;\n    return access_token;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function uploadImage({ filePath, fileType, accessToken }) {\n  const fileStream = fs.createReadStream(filePath);\n  const fileStats = fs.statSync(filePath);\n  const fileSizeInBytes = fileStats.size;\n\n  const config = {\n    method: \"post\",\n    url: \"https://firefly-api.adobe.io/v2/storage/image\",\n    headers: {\n      Authorization: \\`Bearer \\${accessToken}\\`,\n      \"X-API-Key\": process.env.FIREFLY_SERVICES_CLIENT_ID,\n      \"Content-Type\": fileType,\n      \"Content-Length\": fileSizeInBytes,\n    },\n    data: fileStream,\n    maxContentLength: Infinity,\n    maxBodyLength: Infinity,\n  };\n\n  const response = await axios(config);\n  return response.data;\n}\n\nasync function genExpand({ imageId, width, height, accessToken }) {\n  const body = {\n    numVariations: 1,\n    size: {\n      width,\n      height,\n    },\n    image: {\n      source: {\n        uploadId: imageId,\n      },\n    },\n  };\n\n  const config = {\n    method: \"post\",\n    url: \"https://firefly-api.adobe.io/v3/images/expand\",\n    headers: {\n      \"X-Api-Key\": process.env.FIREFLY_SERVICES_CLIENT_ID,\n      Authorization: \\`Bearer \\${accessToken}\\`,\n      \"Content-Type\": \"application/json\",\n    },\n    data: body,\n  };\n\n  const response = await axios(config);\n  return response.data;\n}\n\nasync function createSocialMediaRenditions(accessToken) {\n  // Upload the source image\n  let upload = await uploadImage({\n    filePath: \"./expand-image-tutorial-source-image.webp\",\n    fileType: \"image/webp\",\n    accessToken,\n  });\n\n  let sourceImageId = upload.images[0].id;\n\n  // Loop over each platform and generate renditions\n  for (const platform of SOCIAL_MEDIA_PLATFORMS) {\n    let result = await genExpand({\n      imageId: sourceImageId,\n      width: platform.width,\n      height: platform.height,\n      accessToken,\n    });\n\n    console.log(\n      \\`Generated rendition for \\${platform.name} at \\${result.outputs[0].image.url}\\`,\n    );\n  }\n}\n`}</code></pre>\n    <p>{`We wrote this tutorial in CommmonJS in order to make it easy to get up and running with the code. If you'd prefer to use ES6 modules, convert the code by changing the `}<inlineCode parentName=\"p\">{`require`}</inlineCode>{` statements to `}<inlineCode parentName=\"p\">{`import`}</inlineCode>{` statements and then changing the file name from `}<inlineCode parentName=\"p\">{`index.js`}</inlineCode>{` to `}<inlineCode parentName=\"p\">{`index.mjs`}</inlineCode>{`.`}</p>\n    <h2 {...{\n      \"id\": \"deepen-your-understanding\"\n    }}>{`Deepen Your Understanding`}</h2>\n    <p>{`Now that you completed this tutorial, visit its `}<a parentName=\"p\" {...{\n        \"href\": \"../api/generative_expand/V3\"\n      }}>{`API Reference`}</a>{` to explore more advanced use cases to automate image generation with Firefly.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","_ref","components","props","_objectWithoutProperties","_excluded","mdx","_extends","mdxType","parentName","isMDXComponent"],"sourceRoot":""}