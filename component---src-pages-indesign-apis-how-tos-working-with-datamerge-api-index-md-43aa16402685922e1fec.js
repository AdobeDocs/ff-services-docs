"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[570],{11590:function(e,a,t){t.r(a),t.d(a,{_frontmatter:function(){return m},default:function(){return u}});var n=t(58168),i=t(80045),r=(t(88763),t(15680)),d=t(83407);const l=["components"],m={},p={_frontmatter:m},o=d.A;function u(e){let{components:a}=e,t=(0,i.A)(e,l);return(0,r.mdx)(o,(0,n.A)({},p,t,{components:a,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"working-with-the-data-merge-api"},"Working with the Data Merge API"),(0,r.mdx)("p",null,(0,r.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,r.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"42.1875%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,r.mdx)("picture",{parentName:"span"},"\n          ",(0,r.mdx)("source",{parentName:"picture",srcSet:["/ff-services-docs/static/f4da4f9eaef424ab5f8c439f9be6c4a2/5530d/image3.webp 320w","/ff-services-docs/static/f4da4f9eaef424ab5f8c439f9be6c4a2/0c8fb/image3.webp 640w","/ff-services-docs/static/f4da4f9eaef424ab5f8c439f9be6c4a2/94b1e/image3.webp 1280w","/ff-services-docs/static/f4da4f9eaef424ab5f8c439f9be6c4a2/37c77/image3.webp 1430w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,r.mdx)("source",{parentName:"picture",srcSet:["/ff-services-docs/static/f4da4f9eaef424ab5f8c439f9be6c4a2/dd4a7/image3.png 320w","/ff-services-docs/static/f4da4f9eaef424ab5f8c439f9be6c4a2/0f09e/image3.png 640w","/ff-services-docs/static/f4da4f9eaef424ab5f8c439f9be6c4a2/bbbf7/image3.png 1280w","/ff-services-docs/static/f4da4f9eaef424ab5f8c439f9be6c4a2/1d7f3/image3.png 1430w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,r.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/ff-services-docs/static/f4da4f9eaef424ab5f8c439f9be6c4a2/bbbf7/image3.png",alt:"Data Merge",title:"Data Merge",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,r.mdx)("p",null,"Data merge generates variations of a template document\nfrom data in a provided CSV file."),(0,r.mdx)("p",null,"The Data Merge API supports UTF-16BE encoding for CSV files, which is necessary for languages or characters requiring multi-byte representation. For plain English characters, the CSV will function correctly even without this encoding."),(0,r.mdx)("p",null,"The ",(0,r.mdx)("a",{parentName:"p",href:"../../api/datamerge.md"},"Data Merge API")," includes two components to complete the task: the data merge and the data merge tags."),(0,r.mdx)("h2",{id:"quickstart"},"Quickstart"),(0,r.mdx)("p",null,"The example below takes the data from ",(0,r.mdx)("inlineCode",{parentName:"p"},"Directory_Names.csv")," and creates different variations of ",(0,r.mdx)("inlineCode",{parentName:"p"},"dataMergeTemplate.indd"),". The\noutput is a merged INDD file of all variations."),(0,r.mdx)("h3",{id:"merge-data"},"Merge data"),(0,r.mdx)("p",null,"This cURL command merges the data (from ",(0,r.mdx)("inlineCode",{parentName:"p"},"Directory_Names.csv")," into ",(0,r.mdx)("inlineCode",{parentName:"p"},"dataMergeTemplate.indd"),")."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-curl"},'curl --location --request POST \'https://indesign.adobe.io/v3/merge-data\' \\\n--header \'Authorization: Bearer {YOUR_OAUTH_TOKEN}\' \\\n--header \'x-api-key: {YOUR_API_KEY}\' \\\n--header \'Content-Type: application/json\' \\\n--data-raw \'{\n  "assets": [\n    {\n      "source": {\n        "url": "{PRE-SIGNED_URL}",\n        "storageType": "Azure"\n      },\n      "destination": "dataMergeTemplate.indd"\n    },\n    {\n      "source": {\n        "url": "{PRE-SIGNED_URL}",\n        "storageType": "Azure"\n      },\n      "destination": "Directory_Names.csv"\n    }\n  ],\n  "params": {\n    "targetDocument": "dataMergeTemplate.indd",\n    "outputMediaType": "application/x-indesign",\n    "outputFolderPath": {OUTPUT_FOLDER_PATH},\n    "outputFileBaseString": "merged",\n    "dataSource": "Directory_Names.csv",\n    "hyphenationSettings": {\n      "afterFirst": 3,\n      "beforeLast": 3,\n      "wordsLongerThan": 6,\n      "ladderLimit": 2,\n      "zone": 0.15,\n      "capitalizedWords": false,\n      "lastWord": true,\n      "acrossColumns": false,\n      "dictionarySettings": [\n        {\n          "language": "English: USA",\n          "wordList": ["~word1", "ex~word2"]\n        },\n        {\n          "language": "English: UK",\n          "wordList": ["~word3", "~word4"]\n        }\n      ]\n    }\n  },\n  "outputs": [\n    {\n      "destination": {\n        "url": "{PUT-SIGNED_URL}"\n      },\n      "source": "{OUTPUT_FOLDER_PATH}/merged-1.pdf"\n    }\n  ]\n}\'\n')),(0,r.mdx)("p",null,"The raw data may include three\nparts:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"assets")," - Input assets for the request."),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"params")," - Information about what to do with the input assets."),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"outputs")," - Specify locations where the output assets are uploaded. Without an ",(0,r.mdx)("inlineCode",{parentName:"li"},"outputs")," parameter, the output assets are stored in a temporary\nrepository, and a ",(0,r.mdx)("a",{parentName:"li",href:"/ff-services-docs/indesign-apis/concepts/#pre-signed-urls"},"pre-signed URL")," will be shared for those assets, which will be valid for 24hrs.")),(0,r.mdx)("p",null,"Consult this skeleton ",(0,r.mdx)("a",{parentName:"p",href:"https://developer.adobe.com/commerce/webapi/get-started/gs-curl/"},"cURL request")," for more details."),(0,r.mdx)("h3",{id:"output-path-variations-in-data-merge-api"},"Output Path Variations in Data Merge API"),(0,r.mdx)("p",null,"When using the Data Merge API, the output file paths are determined by the ",(0,r.mdx)("inlineCode",{parentName:"p"},"outputFolderPath")," and ",(0,r.mdx)("inlineCode",{parentName:"p"},"outputFileBaseString")," parameters in the request. Here are the different scenarios and their corresponding output paths:"),(0,r.mdx)("h4",{id:"case-1-both-parameters-missing"},"Case 1: Both Parameters Missing"),(0,r.mdx)("p",null,"When neither ",(0,r.mdx)("inlineCode",{parentName:"p"},"outputFolderPath")," nor ",(0,r.mdx)("inlineCode",{parentName:"p"},"outputFileBaseString")," is provided:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Output is created in a temporary folder with a random number prefix (e.g. tmp0696)"),(0,r.mdx)("li",{parentName:"ul"},"The output filename is derived from the original document filename")),(0,r.mdx)("p",null,"Example:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Source: ",(0,r.mdx)("inlineCode",{parentName:"li"},"Template.indd")),(0,r.mdx)("li",{parentName:"ul"},"Output: ",(0,r.mdx)("inlineCode",{parentName:"li"},"tmp0696/range1/Template.indd")),(0,r.mdx)("li",{parentName:"ul"},"In case of multiple output documents/pdf:",(0,r.mdx)("ul",{parentName:"li"},(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"tmp0696/range1/Template.indd")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"tmp0696/range2/Template.indd")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"tmp0696/range1/Template.pdf")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"tmp0696/range2/Template.pdf")))),(0,r.mdx)("li",{parentName:"ul"},"For PNG/JPEG outputs:",(0,r.mdx)("ul",{parentName:"li"},(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"tmp0696/range1/Template.png")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"tmp0696/range1/Template2.png")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"tmp0696/range1/Template3.png"))))),(0,r.mdx)("h4",{id:"case-2-only-outputfilebasestring-provided"},"Case 2: Only outputFileBaseString Provided"),(0,r.mdx)("p",null,"When only ",(0,r.mdx)("inlineCode",{parentName:"p"},"outputFileBaseString")," is specified:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Output is created in a temporary folder with a random number prefix (e.g. tmp0696)"),(0,r.mdx)("li",{parentName:"ul"},"Filename uses the provided base string")),(0,r.mdx)("p",null,"Example:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Source: ",(0,r.mdx)("inlineCode",{parentName:"li"},"Template.indd")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"outputFileBaseString"),': "MergedOutput"'),(0,r.mdx)("li",{parentName:"ul"},"Output: ",(0,r.mdx)("inlineCode",{parentName:"li"},"tmp0696/range1/MergedOutput.indd")),(0,r.mdx)("li",{parentName:"ul"},"In case of multiple output documents/pdf:",(0,r.mdx)("ul",{parentName:"li"},(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"tmp0696/range1/MergedOutput.indd")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"tmp0696/range2/MergedOutput.indd")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"tmp0696/range1/MergedOutput.pdf")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"tmp0696/range2/MergedOutput.pdf")))),(0,r.mdx)("li",{parentName:"ul"},"For PNG/JPEG outputs:",(0,r.mdx)("ul",{parentName:"li"},(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"tmp0696/range1/MergedOutput.png")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"tmp0696/range1/MergedOutput2.png")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"tmp0696/range1/MergedOutput3.png"))))),(0,r.mdx)("h4",{id:"case-3-only-outputfolderpath-provided"},"Case 3: Only outputFolderPath Provided"),(0,r.mdx)("p",null,"When only ",(0,r.mdx)("inlineCode",{parentName:"p"},"outputFolderPath")," is specified:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Output is created in the specified folder"),(0,r.mdx)("li",{parentName:"ul"},"Filename is derived from the original template")),(0,r.mdx)("p",null,"Example:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Source: ",(0,r.mdx)("inlineCode",{parentName:"li"},"Template.indd")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"outputFolderPath"),': "ResultFolder"'),(0,r.mdx)("li",{parentName:"ul"},"Output: ",(0,r.mdx)("inlineCode",{parentName:"li"},"ResultFolder/range1/Template.indd")),(0,r.mdx)("li",{parentName:"ul"},"In case of multiple output documents/pdf:",(0,r.mdx)("ul",{parentName:"li"},(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"ResultFolder/range1/Template.indd")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"ResultFolder/range2/Template.indd")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"ResultFolder/range1/Template.pdf")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"ResultFolder/range2/Template.pdf")))),(0,r.mdx)("li",{parentName:"ul"},"For PNG/JPEG outputs:",(0,r.mdx)("ul",{parentName:"li"},(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"ResultFolder/range1/Template.png")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"ResultFolder/range1/Template2.png")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"ResultFolder/range1/Template3.png"))))),(0,r.mdx)("h4",{id:"case-4-both-parameters-provided"},"Case 4: Both Parameters Provided"),(0,r.mdx)("p",null,"When both parameters are specified:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Output is created in the specified folder"),(0,r.mdx)("li",{parentName:"ul"},"Filename uses the provided base string")),(0,r.mdx)("p",null,"Example:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Source: ",(0,r.mdx)("inlineCode",{parentName:"li"},"Template.indd")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"outputFileBaseString"),': "MergedOutput"'),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"outputFolderPath"),': "ResultFolder"'),(0,r.mdx)("li",{parentName:"ul"},"Output: ",(0,r.mdx)("inlineCode",{parentName:"li"},"ResultFolder/range1/MergedOutput.indd")),(0,r.mdx)("li",{parentName:"ul"},"In case of multiple output documents/pdf:",(0,r.mdx)("ul",{parentName:"li"},(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"ResultFolder/range1/MergedOutput.indd")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"ResultFolder/range2/MergedOutput.indd")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"ResultFolder/range1/MergedOutput.pdf")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"ResultFolder/range2/MergedOutput.pdf")))),(0,r.mdx)("li",{parentName:"ul"},"For PNG/JPEG outputs:",(0,r.mdx)("ul",{parentName:"li"},(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"ResultFolder/range1/MergedOutput.png")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"ResultFolder/range1/MergedOutput2.png")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"ResultFolder/range1/MergedOutput3.png"))))),(0,r.mdx)("h4",{id:"note"},"Note:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"When generating multiple documents or different output formats (PNG/JPEG), a subfolder is created for each range, such as range1, range2, range3, etc., to maintain organized and unique filenames."),(0,r.mdx)("li",{parentName:"ul"},"The rangeX subfolders (e.g. range1, range2, etc.) are created based on the ",(0,r.mdx)("inlineCode",{parentName:"li"},"pagesPerDocument")," value defined in the request. For example, if ",(0,r.mdx)("inlineCode",{parentName:"li"},"pagesPerDocument")," is set to 10 and the total number of records for the data merge is 20, then two folders—range1 and range2—will be generated. These will contain the output for record ranges 1–10 and 11–20, respectively."),(0,r.mdx)("li",{parentName:"ul"},"The number and type of output files within each rangeX folder depends on the selected ",(0,r.mdx)("inlineCode",{parentName:"li"},"outputMediaType"),":",(0,r.mdx)("ul",{parentName:"li"},(0,r.mdx)("li",{parentName:"ul"},"If ",(0,r.mdx)("inlineCode",{parentName:"li"},"outputMediaType")," is ",(0,r.mdx)("inlineCode",{parentName:"li"},"application/x-indesign"),", or ",(0,r.mdx)("inlineCode",{parentName:"li"},"application/pdf"),", each rangeX folder will contain one InDesign document/pdf."),(0,r.mdx)("li",{parentName:"ul"},"If ",(0,r.mdx)("inlineCode",{parentName:"li"},"outputMediaType")," is ",(0,r.mdx)("inlineCode",{parentName:"li"},"image/png")," or ",(0,r.mdx)("inlineCode",{parentName:"li"},"image/jpeg"),", each rangeX folder will contain multiple image files, corresponding to each record in that range (e.g., 10 images for 10 records).")))),(0,r.mdx)("h3",{id:"retrieve-data-merge-tags"},"Retrieve data merge tags"),(0,r.mdx)("p",null,"This cURL command retrieves the data merge tags from the document."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-curl"},'curl --location --request POST \'https://indesign.adobe.io/v3/merge-data-tags\' \\\n--header \'Authorization: Bearer {YOUR_OAUTH_TOKEN}\' \\\n--header \'x-api-key: {YOUR_API_KEY}\' \\\n--header \'Content-Type: application/json\' \\\n--data-raw \'{\n  "assets": [\n    {\n      "source": {\n        "url": "{PRE-SIGNED_URL}",\n        "storageType": "Azure"\n      },\n      "destination": "dataMergeTemplate.indd"\n    },\n    {\n      "source": {\n        "url": "{PRE-SIGNED_URL}",\n        "storageType": "Azure"\n      },\n      "destination": "batang.ttc"\n    }\n  ],\n  "params": {\n    "outputMediaType": "application/x-indesign",\n    "targetDocument": "dataMergeTemplate.indd",\n    "includePageItemIdentifiers": true\n  }\n}\'\n')))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-indesign-apis-how-tos-working-with-datamerge-api-index-md-43aa16402685922e1fec.js.map