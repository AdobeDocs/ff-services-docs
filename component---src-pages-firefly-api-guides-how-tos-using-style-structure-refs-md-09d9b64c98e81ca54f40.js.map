{"version":3,"file":"component---src-pages-firefly-api-guides-how-tos-using-style-structure-refs-md-09d9b64c98e81ca54f40.js","mappings":"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","sources":["webpack://dev-site-documentation-template/./src/pages/firefly-api/guides/how-tos/using-style-structure-refs.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/ff-services-docs/ff-services-docs/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"using-style-and-structure-image-references\"\n    }}>{`Using Style and Structure Image References`}</h1>\n    <p>{`Learn how to optionally pass in a source image to be used as a style or structure reference for your generated images.`}</p>\n    <h2 {...{\n      \"id\": \"prerequisites\"\n    }}>{`Prerequisites`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`Firefly API credentials. If you don't have them yet, first visit the Firefly Services `}<a parentName=\"li\" {...{\n          \"href\": \"../../../guides/get-started.md\"\n        }}>{`Getting Started`}</a>{` guide to obtain a `}<inlineCode parentName=\"li\">{`client_id`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`client_secret`}</inlineCode>{`.`}</li>\n      <li parentName=\"ul\">{`Node.js installed on your machine and basic familiarity with `}<inlineCode parentName=\"li\">{`JavaScript`}</inlineCode>{`. `}<strong parentName=\"li\">{`Note:`}</strong>{` The code for this guide will make use of the `}<a parentName=\"li\" {...{\n          \"href\": \"../api/image_generation/V3/\"\n        }}>{`Firefly REST APIs`}</a>{` via Node.js, but could be written in any language, or with the `}<a parentName=\"li\" {...{\n          \"href\": \"https://developer.adobe.com/firefly-services/docs/guides/sdks/\"\n        }}>{`SDK`}</a>{`.`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"working-with-reference-images\"\n    }}>{`Working with Reference Images`}</h2>\n    <p>{`Before digging in, you'll need to understand how to work with your existing assets as reference images. The APIs discussed in this guide allow you to reference images in two ways.`}</p>\n    <p>{`First, you can place your media on cloud storage and generate temporary readable URLs for them. However, these URLs may only be used with S3, Sharepoint, and Dropbox. `}</p>\n    <p>{`Secondly, images may be uploaded via the `}<a parentName=\"p\" {...{\n        \"href\": \"../api/upload_image/\"\n      }}>{`Firefly Upload API`}</a>{`. This API lets you send a source image (in either PNG, JPEG, or WebP format), and returns a unique ID that can be used in later calls, like the ones demonstrated below. `}</p>\n    <p>{`Using the `}<a parentName=\"p\" {...{\n        \"href\": \"../api/upload_image/\"\n      }}>{`Upload API`}</a>{` requires a file, as well as the mime type (ie: `}<inlineCode parentName=\"p\">{`image/jpeg`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`image/png`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`image/webp`}</inlineCode>{`). Below is an example function that demonstrates this. It assumes a previously created access token using a `}<inlineCode parentName=\"p\">{`CLIENT_ID`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`CLIENT_SECRET`}</inlineCode>{` value. See the `}<a parentName=\"p\" {...{\n        \"href\": \"./create-your-first-ff-application.md#step-1-set-up-your-environment\"\n      }}>{`Create Your First Firefly Application Guide`}</a>{` for more help on using your credentials in your code to obtain an access token.`}</p>\n    <p><strong parentName=\"p\">{`Note:`}</strong>{` This function is used again in the examples below, and the complete code for this guide is shared at the bottom of this page.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`async function uploadImage(filePath, fileType, id, token) {\n    let stream = fs.createReadStream(filePath);\n    let stats = fs.statSync(filePath);\n    let fileSizeInBytes = stats.size;\n\n    let upload = await fetch('https://firefly-api.adobe.io/v2/storage/image', {\n        method:'POST', \n        headers: {\n            'Authorization':\\`Bearer \\${token}\\`, \n            'X-API-Key':id, \n            'Content-Type':fileType, \n            'Content-Length':fileSizeInBytes\n        }, \n        duplex:'half', \n        body:stream\n    });\n\n    return await upload.json();\n}\n`}</code></pre>\n    <p>{`The result of this call will be a JSON object containing the ID of the image:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n    \"images\": [\n        {\"id\": \"9035f157-4105-4a63-913b-c120285dd799\"}\n    ]\n}\n`}</code></pre>\n    <InlineAlert variant=\"success\" slots=\"title, text\" mdxType=\"InlineAlert\" />\n    <p>{`TIP`}</p>\n    <p>{`We recommend you refer to the `}<a parentName=\"p\" {...{\n        \"href\": \"./create-your-first-ff-application.md\"\n      }}>{`Create your First Firefly Application`}</a>{` guide for a step-by-step walkthrough on the utility methods used in the how-to guides for authenticating (via `}<inlineCode parentName=\"p\">{`getAccessToken()`}</inlineCode>{`), uploading images for use in the calls (`}<inlineCode parentName=\"p\">{`uploadImage()`}</inlineCode>{`), and for downloading the generated results (`}<inlineCode parentName=\"p\">{`downloadFile()`}</inlineCode>{`).`}</p>\n    <h2 {...{\n      \"id\": \"using-a-style-reference-image\"\n    }}>{`Using a Style Reference Image`}</h2>\n    <p>{`The first example uses a reference image to impact the style of the result. A standard prompt is used in a call to the `}<a parentName=\"p\" {...{\n        \"href\": \"../api/image_generation/V3/\"\n      }}>{`Generate Images API`}</a>{` -- both with and without a style reference image to compare the differences.`}</p>\n    <p>{`First, note the source image used for the style reference. Specifically, notice the color and fire attributes:`}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"650px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"66.5625%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\",\n            \"transition\": \"opacity 0.5s 0.5s\",\n            \"pointerEvents\": \"none\"\n          }\n        }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/c12c83cdd45b21e0c9df8e698be68775/5530d/styleRef.webp 320w\", \"/ff-services-docs/static/c12c83cdd45b21e0c9df8e698be68775/0c8fb/styleRef.webp 640w\", \"/ff-services-docs/static/c12c83cdd45b21e0c9df8e698be68775/309d5/styleRef.webp 650w\"],\n            \"sizes\": \"(max-width: 650px) 100vw, 650px\",\n            \"type\": \"image/webp\"\n          }}></source>{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/c12c83cdd45b21e0c9df8e698be68775/8980b/styleRef.jpg 320w\", \"/ff-services-docs/static/c12c83cdd45b21e0c9df8e698be68775/56d4e/styleRef.jpg 640w\", \"/ff-services-docs/static/c12c83cdd45b21e0c9df8e698be68775/8ea4d/styleRef.jpg 650w\"],\n            \"sizes\": \"(max-width: 650px) 100vw, 650px\",\n            \"type\": \"image/jpeg\"\n          }}></source>{`\n          `}<img parentName=\"picture\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"src\": \"/ff-services-docs/static/c12c83cdd45b21e0c9df8e698be68775/8ea4d/styleRef.jpg\",\n            \"alt\": \"Style reference image\",\n            \"title\": \"Style reference image\",\n            \"loading\": \"lazy\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"opacity\": \"0\",\n              \"transition\": \"opacity 0.5s\",\n              \"color\": \"inherit\",\n              \"boxShadow\": \"inset 0px 0px 0px 400px none\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            }\n          }}></img>{`\n        `}</picture>{`\n    `}</span></p>\n    <p>{`Before using this source image as a style reference in the `}<a parentName=\"p\" {...{\n        \"href\": \"../api/image_generation/V3/\"\n      }}>{`Generate Images API`}</a>{` call, you'll need to get an upload ID for it to pass in the `}<inlineCode parentName=\"p\">{`style.imageReference.source.uploadId`}</inlineCode>{` object. An example payload for the Generate Images API is provided below for reference:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n    \"numVariations\":1,\n    \"prompt\":\"some prompt\",\n    \"size\":{\n        \"width\":1792,\n        \"height\":2304\n    }, \n    \"style\":{\n        \"imageReference\": {\n            \"source\":{\n                \"uploadId\":\"The ID value of the uploaded style reference\"\n            }\n        }\n    }\n}\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Note:`}</strong>{` You could alternatively provide a `}<a parentName=\"p\" {...{\n        \"href\": \"#working-with-reference-images\"\n      }}>{`presigned (temporary) URL`}</a>{` from an image in cloud storage in the `}<inlineCode parentName=\"p\">{`url`}</inlineCode>{` property of the `}<inlineCode parentName=\"p\">{`style.imageReference.source`}</inlineCode>{` object. See the `}<a parentName=\"p\" {...{\n        \"href\": \"../api/image_generation/V3/\"\n      }}>{`Generate Images API`}</a>{` for details.`}</p>\n    <p>{`Next, we'll need utility code to get an access token, upload an image (via the `}<a parentName=\"p\" {...{\n        \"href\": \"../api/upload_image/\"\n      }}>{`Upload API`}</a>{`), and download the result. An example is below:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`import fs from 'fs';\nimport { Readable } from 'stream';\nimport { finished } from 'stream/promises';\n\n/*\n Set the credentials based on environment variables.\n*/\nconst CLIENT_ID = process.env.CLIENT_ID;\nconst CLIENT_SECRET = process.env.CLIENT_SECRET;\n\nasync function getAccessToken(id, secret) {\n    const params = new URLSearchParams();\n\n    params.append('grant_type', 'client_credentials');\n    params.append('client_id', id);\n    params.append('client_secret', secret);\n    params.append('scope', 'openid,AdobeID,firefly_enterprise,firefly_api,ff_apis');\n    \n    let resp = await fetch('https://ims-na1-stg1.adobelogin.com/ims/token/v3', \n        { \n            method: 'POST', \n            body: params\n        }\n    );\n\n    let data = await resp.json();\n    return data.access_token;\n}\n\nasync function uploadImage(filePath, fileType, id, token) {\n    let stream = fs.createReadStream(filePath);\n    let stats = fs.statSync(filePath);\n    let fileSizeInBytes = stats.size;\n\n    let upload = await fetch('https://firefly-api.adobe.io/v2/storage/image', {\n        method:'POST', \n        headers: {\n            'Authorization':\\`Bearer \\${token}\\`, \n            'X-API-Key':id, \n            'Content-Type':fileType, \n            'Content-Length':fileSizeInBytes\n        }, \n        duplex:'half', \n        body:stream\n    });\n\n    return await upload.json();\n}\n\nasync function downloadFile(url, filePath) {\n    let res = await fetch(url);\n    const body = Readable.fromWeb(res.body);\n    const download_write_stream = fs.createWriteStream(filePath);\n    return await finished(body.pipe(download_write_stream));\n}\n`}</code></pre>\n    <p>{`Now, you'll see an examplf of a wrapper function for the `}<a parentName=\"p\" {...{\n        \"href\": \"../api/image_generation/V3/\"\n      }}>{`Generate Images API`}</a>{` call that optionally allows you to pass the id of an uploaded style reference image in the `}<inlineCode parentName=\"p\">{`uploadId`}</inlineCode>{` parameter:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`async function generateImage(prompt, id, token, styleReference) {\n    let body = {\n        numVariations:1,\n        prompt,\n        size:{\n            width:1792,\n            height:2304\n        }\n    }\n\n    if(styleReference) {\n        body.style = {\n            imageReference: {\n                source: { \n                    uploadId: styleReference \n                }\n            }\n        };\n    }\n\n    let req = await fetch('https://firefly-api.adobe.io/v3/images/generate', {\n        method:'POST',\n        headers: {\n            'X-Api-Key':id, \n            'Authorization':\\`Bearer \\${token}\\`,\n            'Content-Type':'application/json'\n        }, \n        body: JSON.stringify(body)\n    });\n\n    return await req.json();\n}\n`}</code></pre>\n    <p>{`Finally, the demo code. It will authenticate, upload the style reference, and then make two calls using the same prompt, one with a style reference and one without:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`let token = await getAccessToken(CLIENT_ID, CLIENT_SECRET);\n\nlet upload = await uploadImage('./source_image.jpg', 'image/jpeg', CLIENT_ID, token);\nlet styleReference = upload.images[0].id;\n\nlet prompt = 'A long-haired cat majestically riding a flying unicorn. The cat is wielding a rainbow shield and sword, pointing the swords tip outwards.';\n\n// First, no style reference\nlet result = await generateImage(prompt, CLIENT_ID, token);\nlet fileName = \\`./output/without_style_reference.jpg\\`;\nawait downloadFile(result.outputs[0].image.url, fileName);\n\n// Second, with a style reference\nresult = await generateImage(prompt, CLIENT_ID, token, styleReference);\nfileName = \\`./output/with_style_reference.jpg\\`;\nawait downloadFile(result.outputs[0].image.url, fileName);\n`}</code></pre>\n    <p>{`Given the prompt, here's the initial result with no style:`}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"650px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"128.75%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\",\n            \"transition\": \"opacity 0.5s 0.5s\",\n            \"pointerEvents\": \"none\"\n          }\n        }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/b45c79ba9c57a65965188ab442a36fff/5530d/without-style-ref.webp 320w\", \"/ff-services-docs/static/b45c79ba9c57a65965188ab442a36fff/0c8fb/without-style-ref.webp 640w\", \"/ff-services-docs/static/b45c79ba9c57a65965188ab442a36fff/309d5/without-style-ref.webp 650w\"],\n            \"sizes\": \"(max-width: 650px) 100vw, 650px\",\n            \"type\": \"image/webp\"\n          }}></source>{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/b45c79ba9c57a65965188ab442a36fff/8980b/without-style-ref.jpg 320w\", \"/ff-services-docs/static/b45c79ba9c57a65965188ab442a36fff/56d4e/without-style-ref.jpg 640w\", \"/ff-services-docs/static/b45c79ba9c57a65965188ab442a36fff/8ea4d/without-style-ref.jpg 650w\"],\n            \"sizes\": \"(max-width: 650px) 100vw, 650px\",\n            \"type\": \"image/jpeg\"\n          }}></source>{`\n          `}<img parentName=\"picture\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"src\": \"/ff-services-docs/static/b45c79ba9c57a65965188ab442a36fff/8ea4d/without-style-ref.jpg\",\n            \"alt\": \"Without style reference image\",\n            \"title\": \"Without style reference image\",\n            \"loading\": \"lazy\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"opacity\": \"0\",\n              \"transition\": \"opacity 0.5s\",\n              \"color\": \"inherit\",\n              \"boxShadow\": \"inset 0px 0px 0px 400px none\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            }\n          }}></img>{`\n        `}</picture>{`\n    `}</span></p>\n    <p>{`And here's the result with the style reference:`}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"650px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"128.75%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\",\n            \"transition\": \"opacity 0.5s 0.5s\",\n            \"pointerEvents\": \"none\"\n          }\n        }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/f82ac8a1faa2e6ccabea68ccd7f2fdba/5530d/with-style-ref.webp 320w\", \"/ff-services-docs/static/f82ac8a1faa2e6ccabea68ccd7f2fdba/0c8fb/with-style-ref.webp 640w\", \"/ff-services-docs/static/f82ac8a1faa2e6ccabea68ccd7f2fdba/309d5/with-style-ref.webp 650w\"],\n            \"sizes\": \"(max-width: 650px) 100vw, 650px\",\n            \"type\": \"image/webp\"\n          }}></source>{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/f82ac8a1faa2e6ccabea68ccd7f2fdba/8980b/with-style-ref.jpg 320w\", \"/ff-services-docs/static/f82ac8a1faa2e6ccabea68ccd7f2fdba/56d4e/with-style-ref.jpg 640w\", \"/ff-services-docs/static/f82ac8a1faa2e6ccabea68ccd7f2fdba/8ea4d/with-style-ref.jpg 650w\"],\n            \"sizes\": \"(max-width: 650px) 100vw, 650px\",\n            \"type\": \"image/jpeg\"\n          }}></source>{`\n          `}<img parentName=\"picture\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"src\": \"/ff-services-docs/static/f82ac8a1faa2e6ccabea68ccd7f2fdba/8ea4d/with-style-ref.jpg\",\n            \"alt\": \"With style reference image\",\n            \"title\": \"With style reference image\",\n            \"loading\": \"lazy\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"opacity\": \"0\",\n              \"transition\": \"opacity 0.5s\",\n              \"color\": \"inherit\",\n              \"boxShadow\": \"inset 0px 0px 0px 400px none\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            }\n          }}></img>{`\n        `}</picture>{`\n    `}</span></p>\n    <p>{`Note the effect that the style reference image had on the generated result.`}</p>\n    <h2 {...{\n      \"id\": \"using-a-structure-reference-image\"\n    }}>{`Using a Structure Reference Image`}</h2>\n    <p>{`The next feature you'll see is how to use an image as a structure reference. As you can imagine, this tells Firefly to use the source not as a 'design reference' (ie: trying to match color schemes and styling), but more the actual structure of the source image itself. First, as with the style reference example, once you've uploaded your image using the `}<a parentName=\"p\" {...{\n        \"href\": \"../api/upload_image/\"\n      }}>{`Firefly Upload API`}</a>{`, you can reference it in the your data sent to the API: `}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n    \"numVariations\":1,\n    \"prompt\":\"some prompt\",\n    \"size\":{\n        \"width\":1792,\n        \"height\":2304\n    }, \n    \"structure\":{\n        \"imageReference\": {\n            \"source\":{\n                \"uploadId\":\"The ID value of the uploaded structure reference\"\n            }\n        }\n    }\n}\n`}</code></pre>\n    <p>{`Note, that similar to `}<inlineCode parentName=\"p\">{`style`}</inlineCode>{`, `}<a parentName=\"p\" {...{\n        \"href\": \"#working-with-reference-images\"\n      }}>{`cloud storage URLs`}</a>{` may be used as well. To demonstrate this, you will once again use a simple wrapper to the `}<a parentName=\"p\" {...{\n        \"href\": \"../api/image_generation/V3/\"\n      }}>{`Generate Images`}</a>{` endpoint, but this time optionally accept the ID of an image to use as the structure reference:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`async function generateImage(prompt, id, token, structureReference) {\n\n    let body = {\n        numVariations:1,\n        prompt,\n        size:{\n            width:1792,\n            height:2304\n        }\n    }\n\n    if(structureReference) {\n        body.structure = {\n            imageReference: {\n                source: { \n                    uploadId: structureReference \n                }\n            }\n        };\n    }\n\n    let req = await fetch('https://firefly-api.adobe.io/v3/images/generate', {\n        method:'POST',\n        headers: {\n            'X-Api-Key':id, \n            'Authorization':\\`Bearer \\${token}\\`,\n            'Content-Type':'application/json'\n        }, \n        body: JSON.stringify(body)\n    });\n\n    return await req.json();\n}\n`}</code></pre>\n    <p>{`For example, considering this as a structure reference:`}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"650px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"77.8125%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\",\n            \"transition\": \"opacity 0.5s 0.5s\",\n            \"pointerEvents\": \"none\"\n          }\n        }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/aa86a1f30dc4490de815f919c408135c/5530d/structureRef.webp 320w\", \"/ff-services-docs/static/aa86a1f30dc4490de815f919c408135c/0c8fb/structureRef.webp 640w\", \"/ff-services-docs/static/aa86a1f30dc4490de815f919c408135c/309d5/structureRef.webp 650w\"],\n            \"sizes\": \"(max-width: 650px) 100vw, 650px\",\n            \"type\": \"image/webp\"\n          }}></source>{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/aa86a1f30dc4490de815f919c408135c/8980b/structureRef.jpg 320w\", \"/ff-services-docs/static/aa86a1f30dc4490de815f919c408135c/56d4e/structureRef.jpg 640w\", \"/ff-services-docs/static/aa86a1f30dc4490de815f919c408135c/8ea4d/structureRef.jpg 650w\"],\n            \"sizes\": \"(max-width: 650px) 100vw, 650px\",\n            \"type\": \"image/jpeg\"\n          }}></source>{`\n          `}<img parentName=\"picture\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"src\": \"/ff-services-docs/static/aa86a1f30dc4490de815f919c408135c/8ea4d/structureRef.jpg\",\n            \"alt\": \"Structure reference image\",\n            \"title\": \"Structure reference image\",\n            \"loading\": \"lazy\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"opacity\": \"0\",\n              \"transition\": \"opacity 0.5s\",\n              \"color\": \"inherit\",\n              \"boxShadow\": \"inset 0px 0px 0px 400px none\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            }\n          }}></img>{`\n        `}</picture>{`\n    `}</span></p>\n    <p>{`Note the position of the cat, the direction it's facing, etc. Now consider this prompt: `}<inlineCode parentName=\"p\">{`\"picture of a poodle with colorful fur looking majestic\"`}</inlineCode></p>\n    <p>{`Without the structure reference, you will see:`}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"650px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"128.75%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\",\n            \"transition\": \"opacity 0.5s 0.5s\",\n            \"pointerEvents\": \"none\"\n          }\n        }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/211d1eddb1db47a1f159485cc11f6aa9/5530d/without-structure-ref.webp 320w\", \"/ff-services-docs/static/211d1eddb1db47a1f159485cc11f6aa9/0c8fb/without-structure-ref.webp 640w\", \"/ff-services-docs/static/211d1eddb1db47a1f159485cc11f6aa9/309d5/without-structure-ref.webp 650w\"],\n            \"sizes\": \"(max-width: 650px) 100vw, 650px\",\n            \"type\": \"image/webp\"\n          }}></source>{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/211d1eddb1db47a1f159485cc11f6aa9/8980b/without-structure-ref.jpg 320w\", \"/ff-services-docs/static/211d1eddb1db47a1f159485cc11f6aa9/56d4e/without-structure-ref.jpg 640w\", \"/ff-services-docs/static/211d1eddb1db47a1f159485cc11f6aa9/8ea4d/without-structure-ref.jpg 650w\"],\n            \"sizes\": \"(max-width: 650px) 100vw, 650px\",\n            \"type\": \"image/jpeg\"\n          }}></source>{`\n          `}<img parentName=\"picture\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"src\": \"/ff-services-docs/static/211d1eddb1db47a1f159485cc11f6aa9/8ea4d/without-structure-ref.jpg\",\n            \"alt\": \"Without structure reference image\",\n            \"title\": \"Without structure reference image\",\n            \"loading\": \"lazy\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"opacity\": \"0\",\n              \"transition\": \"opacity 0.5s\",\n              \"color\": \"inherit\",\n              \"boxShadow\": \"inset 0px 0px 0px 400px none\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            }\n          }}></img>{`\n        `}</picture>{`\n    `}</span></p>\n    <p>{`Now, compare it to the following generated image from using the structure reference provided:`}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"650px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"128.75%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\",\n            \"transition\": \"opacity 0.5s 0.5s\",\n            \"pointerEvents\": \"none\"\n          }\n        }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/4492a9c72a745996e1b40d46bc3500af/5530d/with-structure-ref.webp 320w\", \"/ff-services-docs/static/4492a9c72a745996e1b40d46bc3500af/0c8fb/with-structure-ref.webp 640w\", \"/ff-services-docs/static/4492a9c72a745996e1b40d46bc3500af/309d5/with-structure-ref.webp 650w\"],\n            \"sizes\": \"(max-width: 650px) 100vw, 650px\",\n            \"type\": \"image/webp\"\n          }}></source>{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/4492a9c72a745996e1b40d46bc3500af/8980b/with-structure-ref.jpg 320w\", \"/ff-services-docs/static/4492a9c72a745996e1b40d46bc3500af/56d4e/with-structure-ref.jpg 640w\", \"/ff-services-docs/static/4492a9c72a745996e1b40d46bc3500af/8ea4d/with-structure-ref.jpg 650w\"],\n            \"sizes\": \"(max-width: 650px) 100vw, 650px\",\n            \"type\": \"image/jpeg\"\n          }}></source>{`\n          `}<img parentName=\"picture\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"src\": \"/ff-services-docs/static/4492a9c72a745996e1b40d46bc3500af/8ea4d/with-structure-ref.jpg\",\n            \"alt\": \"With structure reference image\",\n            \"title\": \"With structure reference image\",\n            \"loading\": \"lazy\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"opacity\": \"0\",\n              \"transition\": \"opacity 0.5s\",\n              \"color\": \"inherit\",\n              \"boxShadow\": \"inset 0px 0px 0px 400px none\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            }\n          }}></img>{`\n        `}</picture>{`\n    `}</span></p>\n    <p>{`Again, the difference is striking. `}</p>\n    <h2 {...{\n      \"id\": \"complete-source-code\"\n    }}>{`Complete Source Code`}</h2>\n    <p>{`The complete source code containing the utilities for authentication, uploading, and downloading is provided below.`}</p>\n    <InlineAlert variant=\"warning\" slots=\"title, text\" mdxType=\"InlineAlert\" />\n    <p>{`IMPORTANT`}</p>\n    <p>{`Since the Node.js code uses imports and top-level `}<inlineCode parentName=\"p\">{`await`}</inlineCode>{`, you must either use the `}<inlineCode parentName=\"p\">{`.mjs`}</inlineCode>{` extension on your script file, or ensure you have a `}<inlineCode parentName=\"p\">{`package.json`}</inlineCode>{` with `}<inlineCode parentName=\"p\">{`type: \"module\"`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`import fs from 'fs';\nimport { Readable } from 'stream';\nimport { finished } from 'stream/promises';\n\n/*\n  Set the credentials based on environment variables.\n*/\nconst CLIENT_ID = process.env.CLIENT_ID;\nconst CLIENT_SECRET = process.env.CLIENT_SECRET;\n\nasync function getAccessToken(id, secret) {\n    const params = new URLSearchParams();\n\n    params.append('grant_type', 'client_credentials');\n    params.append('client_id', id);\n    params.append('client_secret', secret);\n    params.append('scope', 'openid,AdobeID,firefly_enterprise,firefly_api,ff_apis');\n    \n    let resp = await fetch('https://ims-na1-stg1.adobelogin.com/ims/token/v3', \n        { \n            method: 'POST', \n            body: params\n        }\n    );\n\n    let data = await resp.json();\n    return data.access_token;\n}\n\nasync function uploadImage(filePath, fileType, id, token) {\n    let stream = fs.createReadStream(filePath);\n    let stats = fs.statSync(filePath);\n    let fileSizeInBytes = stats.size;\n\n    let upload = await fetch('https://firefly-api.adobe.io/v2/storage/image', {\n        method:'POST', \n        headers: {\n            'Authorization':\\`Bearer \\${token}\\`, \n            'X-API-Key':id, \n            'Content-Type':fileType, \n            'Content-Length':fileSizeInBytes\n        }, \n        duplex:'half', \n        body:stream\n    });\n\n    return await upload.json();\n}\n\nasync function downloadFile(url, filePath) {\n    let res = await fetch(url);\n    const body = Readable.fromWeb(res.body);\n    const download_write_stream = fs.createWriteStream(filePath);\n    return await finished(body.pipe(download_write_stream));\n}\n\nasync function generateImage(prompt, id, token, structureReference) {\n    let body = {\n        numVariations:1,\n        prompt,\n        size:{\n            width:1792,\n            height:2304\n        }\n    }\n\n    if(structureReference) {\n        body.structure = {\n            imageReference: {\n                source: { \n                    uploadId: structureReference \n                }\n            }\n        };\n    }\n\n    let req = await fetch('https://firefly-api.adobe.io/v3/images/generate', {\n        method:'POST',\n        headers: {\n            'X-Api-Key':id, \n            'Authorization':\\`Bearer \\${token}\\`,\n            'Content-Type':'application/json'\n        }, \n        body: JSON.stringify(body)\n    });\n\n    return await req.json();\n}\n\nlet token = await getAccessToken(CLIENT_ID, CLIENT_SECRET);\n\nlet upload = await uploadImage('./cat_writing_laptop.jpg', 'image/jpeg', CLIENT_ID, token);\nlet structureReference = upload.images[0].id;\n\nlet prompt = 'picture of a poodle with colorful fur looking majestic';\n\n// First, no structure reference\nlet result = await generateImage(prompt, CLIENT_ID, token);\nlet fileName = \\`./output/without_structure_reference.jpg\\`;\nawait downloadFile(result.outputs[0].image.url, fileName);\n\n// Second, with a structure reference\nresult = await generateImage(prompt, CLIENT_ID, token, structureReference);\nfileName = \\`./output/with_structure_reference.jpg\\`;\nawait downloadFile(result.outputs[0].image.url, fileName);\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"next-steps\"\n    }}>{`Next Steps`}</h2>\n    <p>{`While this guide demonstrated two powerful ways to influence Firefly when generating images, there's still more you can learn about to tweak what's generated from your API calls. Check out the other guides in the How-Tos section and the `}<a parentName=\"p\" {...{\n        \"href\": \"../api/image_generation/V3/\"\n      }}>{`API Reference`}</a>{` for more details.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","InlineAlert","name","props","console","warn","mdx","layoutProps","MDXLayout","DefaultLayout","MDXContent","_ref","components","_objectWithoutProperties","_excluded","_extends","mdxType","parentName","variant","slots","isMDXComponent"],"sourceRoot":""}