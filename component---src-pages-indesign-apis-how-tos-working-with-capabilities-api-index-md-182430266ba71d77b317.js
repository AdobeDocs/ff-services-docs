"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[8040],{68846:function(e,a,t){t.r(a),t.d(a,{_frontmatter:function(){return o},default:function(){return c}});var i=t(58168),s=t(80045),n=(t(88763),t(15680)),d=t(83407);const r=["components"],o={},p={_frontmatter:o},m=d.A;function c(e){let{components:a}=e,t=(0,s.A)(e,r);return(0,n.mdx)(m,(0,i.A)({},p,t,{components:a,mdxType:"MDXLayout"}),(0,n.mdx)("h1",{id:"working-with-the-custom-capabilities-api"},"Working with the Custom Capabilities API"),(0,n.mdx)("p",null,"With the Custom Capabilities API, register ",(0,n.mdx)("a",{parentName:"p",href:"../writing-custom-scripts-for-capability-api/"},"custom capabilities that you've scripted")," with the API. Then use those custom capabilities on documents by referencing the ",(0,n.mdx)("inlineCode",{parentName:"p"},"{CAPABILITY_ID}"),"."),(0,n.mdx)("h2",{id:"before-you-start"},"Before you start"),(0,n.mdx)("ul",null,(0,n.mdx)("li",{parentName:"ul"},"You'll need ",(0,n.mdx)("a",{parentName:"li",href:"../../concepts/#Access-tokens"},"a valid access token and client ID"),".")),(0,n.mdx)("p",null,"In the cURL commands, be sure to:"),(0,n.mdx)("ul",null,(0,n.mdx)("li",{parentName:"ul"},"Update the ",(0,n.mdx)("inlineCode",{parentName:"li"},"Authorization")," with the bearer access token."),(0,n.mdx)("li",{parentName:"ul"},"Update ",(0,n.mdx)("inlineCode",{parentName:"li"},"x-api-key")," with the client ID."),(0,n.mdx)("li",{parentName:"ul"},"Update ",(0,n.mdx)("inlineCode",{parentName:"li"},"x-gw-ims-org-id")," with your organization ID.")),(0,n.mdx)("h2",{id:"register-a-custom-capability"},"Register a custom capability"),(0,n.mdx)("p",null,(0,n.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"904px"}},"\n      ",(0,n.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"38.125%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,n.mdx)("picture",{parentName:"span"},"\n          ",(0,n.mdx)("source",{parentName:"picture",srcSet:["/ff-services-docs/static/5abb6eded8108a1e5c7f819def282ac2/5530d/image4.webp 320w","/ff-services-docs/static/5abb6eded8108a1e5c7f819def282ac2/0c8fb/image4.webp 640w","/ff-services-docs/static/5abb6eded8108a1e5c7f819def282ac2/9b20f/image4.webp 904w"],sizes:"(max-width: 904px) 100vw, 904px",type:"image/webp"}),"\n          ",(0,n.mdx)("source",{parentName:"picture",srcSet:["/ff-services-docs/static/5abb6eded8108a1e5c7f819def282ac2/dd4a7/image4.png 320w","/ff-services-docs/static/5abb6eded8108a1e5c7f819def282ac2/0f09e/image4.png 640w","/ff-services-docs/static/5abb6eded8108a1e5c7f819def282ac2/91af2/image4.png 904w"],sizes:"(max-width: 904px) 100vw, 904px",type:"image/png"}),"\n          ",(0,n.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/ff-services-docs/static/5abb6eded8108a1e5c7f819def282ac2/91af2/image4.png",alt:"image4",title:"image4",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,n.mdx)("p",null,"New custom capabilities get registered by making a POST call to the API."),(0,n.mdx)("h3",{id:"quickstart"},"Quickstart"),(0,n.mdx)("p",null,"Use this cURL command to register a custom capability.\nBe sure to update the ",(0,n.mdx)("inlineCode",{parentName:"p"},"{YOUR_CUSTOM_SCRIPT_ZIP}")," with the ",(0,n.mdx)("a",{parentName:"p",href:"/ff-services-docs/how-tos/writing-custom-scripts-for-capability-api/"},"path to your custom script"),"."),(0,n.mdx)("pre",null,(0,n.mdx)("code",{parentName:"pre",className:"language-curl"},"curl --request POST \\\n--url https://indesign.adobe.io/v3/capability \\\n--header 'Authorization: Bearer {YOUR_OAUTH_TOKEN}' \\\n--header 'x-api-key: {YOUR_API_KEY}' \\\n--header 'Content-Type: multipart/form-data' \\\n--header 'x-gw-ims-org-id: {YOUR_ORG_ID}' \\\n--form file=@{YOUR_CUSTOM_SCRIPT_ZIP}\n")),(0,n.mdx)("p",null,"In the response, you'll receive a ",(0,n.mdx)("inlineCode",{parentName:"p"},"{CAPABILITY_ID}"),"."),(0,n.mdx)("p",null,(0,n.mdx)("strong",{parentName:"p"},"Example response")),(0,n.mdx)("pre",null,(0,n.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "url": "https://indesign.adobe.io/v3/{CAPABILITY_ID}/sample-execution",\n  "capability": "sample-execution",\n  "version": "1.0.0"\n}\n')),(0,n.mdx)("h2",{id:"execute-a-custom-capability"},"Execute a custom capability"),(0,n.mdx)("p",null,(0,n.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"904px"}},"\n      ",(0,n.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"43.125%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,n.mdx)("picture",{parentName:"span"},"\n          ",(0,n.mdx)("source",{parentName:"picture",srcSet:["/ff-services-docs/static/3f7fdf1774d9e896782d70174a788392/5530d/image5.webp 320w","/ff-services-docs/static/3f7fdf1774d9e896782d70174a788392/0c8fb/image5.webp 640w","/ff-services-docs/static/3f7fdf1774d9e896782d70174a788392/9b20f/image5.webp 904w"],sizes:"(max-width: 904px) 100vw, 904px",type:"image/webp"}),"\n          ",(0,n.mdx)("source",{parentName:"picture",srcSet:["/ff-services-docs/static/3f7fdf1774d9e896782d70174a788392/dd4a7/image5.png 320w","/ff-services-docs/static/3f7fdf1774d9e896782d70174a788392/0f09e/image5.png 640w","/ff-services-docs/static/3f7fdf1774d9e896782d70174a788392/91af2/image5.png 904w"],sizes:"(max-width: 904px) 100vw, 904px",type:"image/png"}),"\n          ",(0,n.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/ff-services-docs/static/3f7fdf1774d9e896782d70174a788392/91af2/image5.png",alt:"image5",title:"image5",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,n.mdx)("p",null,"Assets specified in the execution request are downloaded on the\nlocal file system using the specified identifiers. The capability script\nshould be authored to work against locally downloaded assets."),(0,n.mdx)("p",null,"The execution request can include a JSON dictionary as a parameter.\nThe capability defines the parameters and passes as is\nto it during execution"),(0,n.mdx)("p",null,"The generated output uploads to the target location. If no location is provided,\nthe assets upload to temporary storage."),(0,n.mdx)("p",null,"Each execution request is an asynchronous operation for which the status can be\nfetched using the ",(0,n.mdx)("a",{parentName:"p",href:"../../api/status.md"},"Status API"),". A link with expiry is provided in the execution status."),(0,n.mdx)("h3",{id:"quickstart-1"},"Quickstart"),(0,n.mdx)("p",null,"Use this cURL command to run a custom capability on a document."),(0,n.mdx)("pre",null,(0,n.mdx)("code",{parentName:"pre",className:"language-curl"},'curl --request POST \\\n--url https://indesign.adobe.io/v3/{CAPABILITY_ID}/sample-execution \\\n--header \'Authorization: Bearer {YOUR_OAUTH_TOKEN}\' \\\n--header \'Content-Type: application/json\' \\\n--header \'x-api-key: {YOUR_API_KEY}\' \\\n--header \'x-gw-ims-org-id: {YOUR_ORG_ID}\' \\\n--data-raw \'{\n  "assets": [\n    {\n      "source": {\n        "url": "{YOUR_PRE-SIGNED_URL}"\n      },\n      "destination": "sample.indd"\n    }\n  ],\n  "params": {\n    "targetDocument": "sample.indd",\n    "outputPath": "converted.idml"\n  },\n}\'\n')),(0,n.mdx)("p",null,"The raw data may include three\nparts:"),(0,n.mdx)("ul",null,(0,n.mdx)("li",{parentName:"ul"},(0,n.mdx)("strong",{parentName:"li"},"assets")," - Input assets for the request."),(0,n.mdx)("li",{parentName:"ul"},(0,n.mdx)("strong",{parentName:"li"},"params")," - Information about what to do with the input assets."),(0,n.mdx)("li",{parentName:"ul"},(0,n.mdx)("strong",{parentName:"li"},"outputs")," - Specify locations where the output assets are uploaded. Without an ",(0,n.mdx)("inlineCode",{parentName:"li"},"outputs")," parameter, the output assets are stored in a temporary\nrepository, and a ",(0,n.mdx)("a",{parentName:"li",href:"/ff-services-docs/indesign-apis/concepts/#Pre-signed-URLs"},"pre-signed URL")," will be shared for those assets, which will be valid for 24hrs.")),(0,n.mdx)("p",null,"Consult this skeleton ",(0,n.mdx)("a",{parentName:"p",href:"https://developer.adobe.com/commerce/webapi/get-started/gs-curl/"},"cURL request")," for more details."),(0,n.mdx)("p",null,(0,n.mdx)("strong",{parentName:"p"},"Example response")),(0,n.mdx)("pre",null,(0,n.mdx)("code",{parentName:"pre",className:"language-json"},'{ \n\n"jobId": "9b9d00c5-8659-4766-8430-ed0a1c9bd87d", \n\n"statusUrl": "https://indesign.adobe.io/v3/status/9b9d00c5-8659-4766-8430-ed0a1c9bd87d" \n\n} \n')))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-indesign-apis-how-tos-working-with-capabilities-api-index-md-182430266ba71d77b317.js.map