"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[5174],{73598:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return p},default:function(){return m}});var a=t(58168),o=t(80045),s=(t(88763),t(15680)),r=t(83407);const i=["components"],p={},l={_frontmatter:p},d=r.A;function m(e){let{components:n}=e,t=(0,o.A)(e,i);return(0,s.mdx)(d,(0,a.A)({},l,t,{components:n,mdxType:"MDXLayout"}),(0,s.mdx)("h1",{id:"code-samples"},"Code Samples"),(0,s.mdx)("p",null,"These code snippets are ready to copy  and use for tasks with the Lightroom API."),(0,s.mdx)("h2",{id:"lightroom-tasks"},"Lightroom tasks"),(0,s.mdx)("p",null,"These actions all initiate an asynchronous job and return a response containing the link to ",(0,s.mdx)("a",{parentName:"p",href:"#get-a-tasks-status-and-results"},"poll for job status and results"),"."),(0,s.mdx)("h3",{id:"apply-auto-tone-to-an-image"},"Apply Auto Tone to an image"),(0,s.mdx)("p",null,"Auto Tone is a feature that automatically adjusts the tonal range of an image, making shadows darker and highlights brighter."),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-shell"},'curl -X POST \\\n  https://image.adobe.io/lrService/autoTone \\\n  -H "Authorization: Bearer ${Token}"  \\\n  -H "x-api-key: ${Api Key}" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "inputs": {\n        "href": "<signed GET URL>",\n        "storage": "<storage>"\n    },\n    "outputs": [\n        {\n            "href": "<signed POST URL>",\n            "type": "<type>",\n            "storage": "<storage>"\n        }\n    ]\n}\'\n')),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Example response")),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "_links": {\n        "self": {\n            "href": "https://image.adobe.io/lrService/status/<:jobId>"\n        }\n    }\n}\n')),(0,s.mdx)("h3",{id:"auto-straighten-an-image"},"Auto straighten an image"),(0,s.mdx)("p",null,"Automatically straighten images by identifying and correcting skewed lines."),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-shell"},'curl -X POST \\\n  https://image.adobe.io/lrService/autoStraighten \\\n  -H "Authorization: Bearer ${Token}"  \\\n  -H "x-api-key: ${Api Key}" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "inputs": {\n        "href": "<signed GET URL>",\n        "storage": "<storage>"\n    },\n    "outputs": [\n        {\n            "href": "<signed POST URL>",\n            "type": "<type>",\n            "storage": "<storage>"\n        }\n    ]\n}\'\n')),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Example response")),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "_links": {\n        "self": {\n            "href": "https://image.adobe.io/lrService/status/<:jobId>"\n        }\n    }\n}\n')),(0,s.mdx)("h3",{id:"apply-presets-to-an-image"},"Apply presets to an image"),(0,s.mdx)("p",null,"Apply presets to an image to quickly adjust its appearance."),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-shell"},'curl -X POST \\\n  https://image.adobe.io/lrService/presets \\\n  -H "Authorization: Bearer ${Token}"  \\\n  -H "x-api-key: ${Api Key}" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "inputs": {\n        "source": {\n            "href": "<signed GET URL>",\n            "storage": "<storage>"\n        },\n        "presets": [\n            {\n                "href": "<signed GET URL>",\n                "storage": "<storage>"\n            },\n            {\n                "href": "<SIGNED_GET_URL>",\n                "storage": "<storage>"\n            }\n        ]\n    },\n    "outputs": [\n        {\n            "href": "<SIGNED_POST_URL>",\n            "type": "<type>",\n            "storage": "<storage>"\n        }\n    ]\n}\'\n')),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Example response")),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "_links": {\n        "self": {\n            "href": "https://image.adobe.io/lrService/status/<:jobId>"\n        }\n    }\n}\n')),(0,s.mdx)("h3",{id:"apply-edits-to-an-image"},"Apply edits to an image"),(0,s.mdx)("p",null,"Perform image edits."),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-shell"},'curl -X POST \\\n  https://image.adobe.io/lrService/edit \\\n  -H "Authorization: Bearer ${Token}"  \\\n  -H "x-api-key: ${Api Key}" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "inputs": {\n        "source": {\n            "href": "<signed GET URL>",\n            "storage": "<storage>"\n        }\n    },\n    "options": {\n        "Exposure": -5.00 to 5.00,\n        "Contrast": -100 to 100,\n        "Sharpness": 0 10 150,\n        "WhiteBalance": <"As Shot", "Auto", "Cloudy", "Custom", "Daylight", "Flash", "Fluorescent", "Shade", "Tungsten">\n        "Saturation": -100 to 100,\n        "ColorNoiseReduction": 0 to 100,\n        "NoiseReduction": 0 to 100,\n        "VignetteAmount": -100 to 100,\n        "Vibrance": -100 to 100,\n        "Highlights": -100 to 100,\n        "Shadows": -100 to 100,\n        "Whites": -100 to 100,\n        "Blacks": -100 to 100,\n        "Clarity": -100 to 100,\n        "Dehaze": -100 to +100,\n        "SharpenRadius": 0.5 to 3.0,\n        "SharpenDetail": 0 to 100,\n        "SharpenEdgeMasking": 0 to 100,\n        "Texture": -100 t0 100\n    },\n    "outputs": [\n        {\n            "href": "<signed POST URL>",\n            "type": "<type>",\n            "storage": "<storage>"\n        }\n    ]\n}\'\n')),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Example response")),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "_links": {\n        "self": {\n            "href": "https://image.adobe.io/lrService/status/<:jobId>"\n        }\n    }\n}\n')),(0,s.mdx)("h3",{id:"apply-xmp-to-an-image"},"Apply XMP to an image"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-shell"},'curl -X POST \\\n  https://image.adobe.io/lrService/xmp \\\n  -H "Authorization: Bearer ${Token}"  \\\n  -H "x-api-key: ${Api Key}" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "inputs": {\n        "source": {\n            "href": "<signed GET URL>",\n            "storage": "<storage>"\n        }\n    },\n    "options": {\n        "xmp": "<xmp>",\n        "orientation": "<orientation>"\n    },\n    "outputs": [\n        {\n            "href": "<signed POST URL>",\n            "storage": "<storage>",\n            "type": "<type>"\n        }\n    ]\n}\'\n')),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Example response")),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "_links": {\n        "self": {\n            "href": "https://image.adobe.io/lrService/status/<:jobId>"\n        }\n    }\n}\n')),(0,s.mdx)("h2",{id:"get-a-tasks-status-and-results"},"Get a task's status and results"),(0,s.mdx)("p",null,"Use the Job ID with the ",(0,s.mdx)("inlineCode",{parentName:"p"},"href")," link that's returned in the response to poll for the status of a Lightroom API job."),(0,s.mdx)("p",null,"When a successful job completes, the output file is available at the ",(0,s.mdx)("inlineCode",{parentName:"p"},"href")," link in the response."),(0,s.mdx)("p",null,"If the job fails due to an error, the ",(0,s.mdx)("inlineCode",{parentName:"p"},"errorDetails")," field in the response will contain the details of the failure."),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-shell"},'curl -X GET \\\n  https://image.adobe.io/lrService/status/<jobId> \\\n  -H "Authorization: Bearer ${Token}"  \\\n  -H "x-api-key: ${Api Key}" \\\n  -H "Content-Type: application/json" \\\n')),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Example response")),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "jobId":"<job ID>",\n  "created":"2018-01-04T12:57:15.12345:Z",\n  "modified":"2018-01-04T12:58:36.12345:Z",\n  "outputs":[\n  {\n      "input":"<input_file_href>",\n      "status":"succeeded",\n      "_links":{\n        "self":\n        {\n          "href":"<output_file_href>",\n          "storage":"<storage>"\n        }\n      }\n    }\n  ],\n  "_links":{\n    "self":{\n      "href":"https://image.adobe.io/lrService/status/<jobId>"\n    }\n  }\n}\n')),(0,s.mdx)("h2",{id:"triggering-an-event-from-the-apis"},"Triggering an event from the APIs"),(0,s.mdx)("p",null,"To start receiving the events in your webhook application, pass your IMS organization ID in the header:"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-shell"}," -H 'x-gw-ims-org-id: ${IMS org ID}'  \\\n")),(0,s.mdx)("p",null," The example below demonstrates using this header in an Auto Tone job and a sample event received for that job."),(0,s.mdx)("h3",{id:"step-1-initiating-the-job"},"Step 1: Initiating the job"),(0,s.mdx)("p",null,"This initiates the Auto Tone job using the header to trigger an event."),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-shell"},'curl -X POST \\\n  https://image.adobe.io/lrService/autoTone \\\n  -H "Authorization: Bearer ${Token}" \\\n  -H "Content-Type: application/json" \\\n  -H "x-api-key: ${Api Key}" \\\n  -H \'x-gw-ims-org-id: ${IMS org ID}\' \\\n  -d \'{\n    "inputs": {\n      "href": "<signed GET URL>",\n      "storage": "<storage>"\n    },\n    "outputs": [\n    {\n      "href": "<signed POST URL>",\n      "type": "<type>",\n      "storage": "<storage>"\n    }\n  ]\n}\'\n')),(0,s.mdx)("p",null,"The asynchronous job returns a response containing the ",(0,s.mdx)("inlineCode",{parentName:"p"},"href")," to poll for the job status."),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "_links": {\n        "self": {\n            "href": "https://image.adobe.io/lrService/status/eb4a9211-eb8a-4e88-b853-b9c08ba47427"\n        }\n    }\n}\n')),(0,s.mdx)("h3",{id:"step-2-retrieve-the-jobs-status-on-the-webhook-application-when-the-job-is-complete"},"Step 2: Retrieve the job's status on the webhook application when the job is complete"),(0,s.mdx)("p",null,"The ",(0,s.mdx)("inlineCode",{parentName:"p"},"body")," property in the ",(0,s.mdx)("inlineCode",{parentName:"p"},"event")," object contains the result of the job."),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "event_id": "7b59cc70-88d7-4895-b204-87f5350a0cce",\n  "event": {\n    "header": {\n      "msgType": "JOB_COMPLETION_STATUS",\n      "msgId": "eb4a9211-eb8a-4e88-b853-b9c08ba47427",\n      "imsOrgId": "<IMS org ID>",\n      "eventCode": "lightroom-job-status",\n      "_pipelineMeta": {\n        "pipelineMessageId": "1586290300876:944289:VA7_A1:149:0"\n      },\n      "_smarts": {\n        "definitionId": "3ee6c9056a9d72fc40e09ddf5fdbb0af752e8e49",\n        "runningSmartId": "psmart-yw6wosjksniuuathenny"\n      },\n      "_adobeio": {\n        "imsOrgId": "<IMS org ID>",\n        "providerMetadata": "di_event_code",\n        "eventCode": "lightroom-job-status"\n      }\n    },\n    "body": {\n      "jobId": "eb4a9211-eb8a-4e88-b853-b9c08ba47427",\n      "outputs": [\n        {\n          "input": "<signed GET URL>",\n          "status": "succeeded",\n          "_links": {\n            "self": [\n              {\n                "href": "<signed POST URL>",\n                "storage": "<storage>"\n              }\n            ]\n          }\n        }\n      ],\n      "_links": {\n        "self": {\n          "href": "https://image.adobe.io/lrService/status/eb4a9211-eb8a-4e88-b853-b9c08ba47427"\n        }\n      }\n    }\n  }\n}\n')))}m.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-lightroom-code-sample-index-md-4c7bb2cd0627e5b418fe.js.map