"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[2003],{48217:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return d},default:function(){return p}});var a=t(58168),r=t(80045),o=(t(88763),t(15680)),s=t(83407);const i=["components"],d={},l={_frontmatter:d},c=s.A;function p(e){let{components:n}=e,t=(0,r.A)(e,i);return(0,o.mdx)(c,(0,a.A)({},l,t,{components:n,mdxType:"MDXLayout"}),(0,o.mdx)("h1",{id:"authentication"},"Authentication"),(0,o.mdx)("p",null,"Learn how to authenticate requests to Firefly APIs"),(0,o.mdx)("h2",{id:"overview"},"Overview"),(0,o.mdx)("p",null,"Every request made to Firefly APIs must include an encrypted access token. Your secure, server-side application retrieves an access token by making a request to the ",(0,o.mdx)("a",{parentName:"p",href:"https://www.adobe.com/content/dam/cc/en/trust-center/ungated/whitepapers/corporate/adobe-identity-management-services-security-overview.pdf"},"Adobe Identity Management System (IMS)")," with your ",(0,o.mdx)("strong",{parentName:"p"},"Client ID")," and ",(0,o.mdx)("strong",{parentName:"p"},"Client Secret"),"."),(0,o.mdx)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.mdx)("p",null,"This tutorial assumes you have worked with your Adobe Representative and have the following:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"An ",(0,o.mdx)("a",{parentName:"li",href:"https://developer.adobe.com/"},"Adobe Developer Console")," account."),(0,o.mdx)("li",{parentName:"ul"},"A ",(0,o.mdx)("a",{parentName:"li",href:"https://developer.adobe.com/developer-console/docs/guides/projects/projects-empty/"},"project")," with Firefly API ",(0,o.mdx)("a",{parentName:"li",href:"https://developer.adobe.com/developer-console/docs/guides/services/services-add-api-oauth-s2s/"},"OAuth Server-to-Server credentials set up"),"."),(0,o.mdx)("li",{parentName:"ul"},"Access to your Client ID and Client Secret from the ",(0,o.mdx)("a",{parentName:"li",href:"https://developer.adobe.com/developer-console/docs/guides/services/services-add-api-oauth-s2s/#api-overview"},"Adobe Developer Console project"),". Securely store these credentials and never expose them in client-side or public code.")),(0,o.mdx)("h2",{id:"retrieve-an-access-token"},"Retrieve an Access Token"),(0,o.mdx)("p",null,"First, open a secure terminal and ",(0,o.mdx)("inlineCode",{parentName:"p"},"export")," your ",(0,o.mdx)("strong",{parentName:"p"},"Client ID")," and ",(0,o.mdx)("strong",{parentName:"p"},"Client Secret")," as environment variables so that your later commands can access them:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-bash"},"export FIREFLY_SERVICES_CLIENT_ID=yourClientIdAsdf123\nexport FIREFLY_SERVICES_CLIENT_SECRET=yourClientSecretAsdf123\n")),(0,o.mdx)("p",null,"Next, run the following command to generate an access token:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-bash"},"curl --location 'https://ims-na1.adobelogin.com/ims/token/v3' \\\n--header 'Content-Type: application/x-www-form-urlencoded' \\\n--data-urlencode 'grant_type=client_credentials' \\\n--data-urlencode \"client_id=$FIREFLY_SERVICES_CLIENT_ID\" \\\n--data-urlencode \"client_secret=$FIREFLY_SERVICES_CLIENT_SECRET\" \\\n--data-urlencode 'scope=openid,AdobeID,session,additional_info,read_organizations,firefly_api,ff_apis'\n")),(0,o.mdx)("p",null,"The response will look like this:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'{"access_token":"yourAccessTokenAsdf123","token_type":"bearer","expires_in":86399}\n')),(0,o.mdx)("p",null,"Notice how the response includes an ",(0,o.mdx)("inlineCode",{parentName:"p"},"expires_in")," field, which informs you of how many more seconds the access token is valid for. Each access token is valid for 24 hours, after which your secure server-side application will need to request a new token. A best practice is securely store the token and refresh it before it expires."),(0,o.mdx)("p",null,"Export your access token as an environment variable:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-bash"},"export FIREFLY_SERVICES_ACCESS_TOKEN=yourAccessTokenAsdf123\n")),(0,o.mdx)("h2",{id:"generate-an-image"},"Generate an Image"),(0,o.mdx)("p",null,"Next, call the ",(0,o.mdx)("a",{parentName:"p",href:"../../api/image_generation/V3/"},"Firefly Generate Images API"),":"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-bash"},"curl --location 'https://firefly-api.adobe.io/v3/images/generate' \\\n--header 'Content-Type: application/json' \\\n--header 'Accept: application/json' \\\n--header \"x-api-key: $FIREFLY_SERVICES_CLIENT_ID\" \\\n--header \"Authorization: Bearer $FIREFLY_SERVICES_ACCESS_TOKEN\" \\\n--data '{\n    \"prompt\": \"a realistic illustration of a cat coding\"\n}'\n")),(0,o.mdx)("p",null,"The response will look like this:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "size": {\n        "width": 2048,\n        "height": 2048\n    },\n    "outputs": [\n        {\n            "seed": 1779323515,\n            "image": {\n                "url": "https://pre-signed-firefly-prod.s3-accelerate.amazonaws.com/images/asdf-12345?lots=of&query=params..."\n            }\n        }\n    ],\n    "contentClass": "art"\n}\n')))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-firefly-api-guides-concepts-authentication-index-md-fc677ca10158a7365cba.js.map