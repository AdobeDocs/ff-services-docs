{"version":3,"file":"component---src-pages-guides-tutorials-using-the-sdk-md-4e140b32b317eedd359e.js","mappings":"0TAMaA,EAAe,CAAC,EACvBC,EAAc,CAClBD,gBAEIE,EAAYC,EAAAA,EACH,SAASC,EAAUC,GAG/B,IAHgC,WACjCC,GAEDD,EADIE,GAAKC,EAAAA,EAAAA,GAAAH,EAAAI,GAER,OAAOC,EAAAA,EAAAA,KAACR,GAASS,EAAAA,EAAAA,GAAA,GAAKV,EAAiBM,EAAK,CAAED,WAAYA,EAAYM,QAAQ,eAG5EF,EAAAA,EAAAA,KAAA,MACE,GAAM,iDACJ,kDACJA,EAAAA,EAAAA,KAAA,SAAI,0KACJA,EAAAA,EAAAA,KAAA,MACE,GAAM,YACJ,aACJA,EAAAA,EAAAA,KAAA,SAAI,4FAA2FA,EAAAA,EAAAA,KAAA,KAAGG,WAAW,IACzG,KAAQ,qDACN,aAAiB,4DAA2DH,EAAAA,EAAAA,KAAA,KAAGG,WAAW,IAC5F,KAAQ,kEACN,YAAgB,wCACtBH,EAAAA,EAAAA,KAAA,MACE,GAAM,gDACJ,iDACJA,EAAAA,EAAAA,KAAA,WACEA,EAAAA,EAAAA,KAAA,MAAIG,WAAW,OACbH,EAAAA,EAAAA,KAAA,KAAGG,WAAW,OAAKH,EAAAA,EAAAA,KAAA,UAAQG,WAAW,KAAK,yBAAkC,mLAE/EH,EAAAA,EAAAA,KAAA,MAAIG,WAAW,OACbH,EAAAA,EAAAA,KAAA,KAAGG,WAAW,OAAKH,EAAAA,EAAAA,KAAA,UAAQG,WAAW,KAAK,4BAAqC,6BAA4BH,EAAAA,EAAAA,KAAA,cAAYG,WAAW,KAAK,WAAwB,gVAIpKH,EAAAA,EAAAA,KAAA,SAAI,4EACJA,EAAAA,EAAAA,KAAA,SAAI,qKACJA,EAAAA,EAAAA,KAAA,MACE,GAAM,iBACJ,kBACJA,EAAAA,EAAAA,KAAA,WACEA,EAAAA,EAAAA,KAAA,MAAIG,WAAW,MAAM,+EAA8EH,EAAAA,EAAAA,KAAA,KAAGG,WAAW,KAC7G,KAAQ,qBACN,QAAY,OAEpBH,EAAAA,EAAAA,KAAA,MACE,GAAM,gBACJ,iBACJA,EAAAA,EAAAA,KAAA,SAAI,gEACJA,EAAAA,EAAAA,KAAA,WACEA,EAAAA,EAAAA,KAAA,MAAIG,WAAW,MAAM,yBACrBH,EAAAA,EAAAA,KAAA,MAAIG,WAAW,MAAM,8BACrBH,EAAAA,EAAAA,KAAA,MAAIG,WAAW,MAAM,wBACrBH,EAAAA,EAAAA,KAAA,MAAIG,WAAW,MAAM,sCACrBH,EAAAA,EAAAA,KAAA,MAAIG,WAAW,MAAM,0BAEvBH,EAAAA,EAAAA,KAAA,MACE,GAAM,+BACJ,iCACJA,EAAAA,EAAAA,KAAA,SAAI,sCAAqCA,EAAAA,EAAAA,KAAA,cAAYG,WAAW,KAAK,gBAA6B,yBAAwBH,EAAAA,EAAAA,KAAA,cAAYG,WAAW,KAAK,eAA4B,OAClLH,EAAAA,EAAAA,KAAA,SAAI,6DAA4DA,EAAAA,EAAAA,KAAA,KAAGG,WAAW,IAC1E,KAAQ,+DACN,UAAc,6CAA4CH,EAAAA,EAAAA,KAAA,MAAIG,WAAW,KAAK,OAAY,cAChGH,EAAAA,EAAAA,KAAA,WACEA,EAAAA,EAAAA,KAAA,MAAIG,WAAW,MAAM,QAAOH,EAAAA,EAAAA,KAAA,cAAYG,WAAW,MAAM,eAA4B,sEACrFH,EAAAA,EAAAA,KAAA,MAAIG,WAAW,MAAM,+BACrBH,EAAAA,EAAAA,KAAA,MAAIG,WAAW,MAAM,iCACrBH,EAAAA,EAAAA,KAAA,MAAIG,WAAW,MAAM,kCAEvBH,EAAAA,EAAAA,KAAA,SAAI,wFACJA,EAAAA,EAAAA,KAAA,YAAKA,EAAAA,EAAAA,KAAA,QAAMG,WAAW,MAClB,UAAa,iBACX,wFAGNH,EAAAA,EAAAA,KAAA,SAAI,+DAA8DA,EAAAA,EAAAA,KAAA,cAAYG,WAAW,KAAK,QAAqB,gBAAeH,EAAAA,EAAAA,KAAA,cAAYG,WAAW,KAAK,UAAuB,oEACrLH,EAAAA,EAAAA,KAAA,YAAKA,EAAAA,EAAAA,KAAA,QAAMG,WAAW,MAClB,UAAa,iBACX,0XAkBNH,EAAAA,EAAAA,KAAA,MACE,GAAM,oCACJ,sCACJA,EAAAA,EAAAA,KAAA,SAAI,uJACJA,EAAAA,EAAAA,KAAA,YAAKA,EAAAA,EAAAA,KAAA,QAAMG,WAAW,MAClB,UAAa,eACX,8QASNH,EAAAA,EAAAA,KAAA,SAAI,kEAAiEA,EAAAA,EAAAA,KAAA,cAAYG,WAAW,KAAK,aAA0B,SAAQH,EAAAA,EAAAA,KAAA,cAAYG,WAAW,KAAK,iBAA8B,2BAA0BH,EAAAA,EAAAA,KAAA,cAAYG,WAAW,KAAK,yBAAsC,6CAA4CH,EAAAA,EAAAA,KAAA,cAAYG,WAAW,KAAK,eAA4B,yCAC7XH,EAAAA,EAAAA,KAAA,MACE,GAAM,8BACJ,gCACJA,EAAAA,EAAAA,KAAA,SAAI,gFACJA,EAAAA,EAAAA,KAAA,YAAKA,EAAAA,EAAAA,KAAA,QAAMG,WAAW,MAClB,UAAa,eACX,0GAINH,EAAAA,EAAAA,KAAA,MACE,GAAM,4CACJ,8CACJA,EAAAA,EAAAA,KAAA,SAAI,gIACJA,EAAAA,EAAAA,KAAA,YAAKA,EAAAA,EAAAA,KAAA,QAAMG,WAAW,MAClB,UAAa,eACX,2HAENH,EAAAA,EAAAA,KAAA,SAAI,8CAA6CA,EAAAA,EAAAA,KAAA,MAAIG,WAAW,KAAK,QAAa,0LAAyLH,EAAAA,EAAAA,KAAA,cAAYG,WAAW,KAAK,UAAuB,+EAA8EH,EAAAA,EAAAA,KAAA,cAAYG,WAAW,KAAK,WAAwB,gCAChcH,EAAAA,EAAAA,KAAA,SAAI,oCAAmCA,EAAAA,EAAAA,KAAA,cAAYG,WAAW,KAAK,UAAuB,UAC1FH,EAAAA,EAAAA,KAAA,YAAKA,EAAAA,EAAAA,KAAA,QAAMG,WAAW,MAClB,UAAa,iBACX,4tBAgBNH,EAAAA,EAAAA,KAAA,MACE,GAAM,+BACJ,iCACJA,EAAAA,EAAAA,KAAA,SAAI,2MACJA,EAAAA,EAAAA,KAAA,YAAKA,EAAAA,EAAAA,KAAA,QAAMG,WAAW,MAClB,UAAa,eACX,gXAWNH,EAAAA,EAAAA,KAAA,SAAI,8LAA6LA,EAAAA,EAAAA,KAAA,cAAYG,WAAW,KAAK,QAAqB,YAClPH,EAAAA,EAAAA,KAAA,YAAKA,EAAAA,EAAAA,KAAA,QAAMG,WAAW,MAClB,UAAa,eACX,w4BA4BNH,EAAAA,EAAAA,KAAA,SAAI,wDACJA,EAAAA,EAAAA,KAAA,UAAGA,EAAAA,EAAAA,KAAA,QAAMG,WAAW,IAChB,UAAa,4BACb,MAAS,CACP,SAAY,WACZ,QAAW,QACX,WAAc,OACd,YAAe,OACf,SAAY,UAEZ,YACFH,EAAAA,EAAAA,KAAA,QAAMG,WAAW,OACf,UAAa,qCACb,MAAS,CACP,cAAiB,OACjB,SAAY,WACZ,OAAU,IACV,KAAQ,IACR,QAAW,QACX,WAAc,oBACd,cAAiB,UAEV,QACfH,EAAAA,EAAAA,KAAA,WAASG,WAAW,QAAQ,gBACpBH,EAAAA,EAAAA,KAAA,UAAQG,WAAW,UACnB,OAAU,CAAC,kFAAmF,kFAAmF,mFACjL,MAAS,kCACT,KAAQ,eACG,gBACXH,EAAAA,EAAAA,KAAA,UAAQG,WAAW,UACnB,OAAU,CAAC,iFAAkF,iFAAkF,kFAC/K,MAAS,kCACT,KAAQ,eACG,gBACXH,EAAAA,EAAAA,KAAA,OAAKG,WAAW,UAChB,UAAa,0BACb,IAAO,4EACP,IAAO,yBACP,MAAS,yBACT,QAAW,OACX,MAAS,CACP,MAAS,OACT,OAAU,OACV,OAAU,IACV,cAAiB,SACjB,SAAY,WACZ,QAAW,IACX,WAAc,eACd,MAAS,UACT,UAAa,+BACb,IAAO,IACP,KAAQ,OAEF,cACC,YAEjBH,EAAAA,EAAAA,KAAA,MACE,GAAM,qDACJ,uDACJA,EAAAA,EAAAA,KAAA,SAAI,oSACJA,EAAAA,EAAAA,KAAA,SAAI,sFACJA,EAAAA,EAAAA,KAAA,UAAGA,EAAAA,EAAAA,KAAA,QAAMG,WAAW,IAChB,UAAa,4BACb,MAAS,CACP,SAAY,WACZ,QAAW,QACX,WAAc,OACd,YAAe,OACf,SAAY,UAEZ,YACFH,EAAAA,EAAAA,KAAA,QAAMG,WAAW,OACf,UAAa,qCACb,MAAS,CACP,cAAiB,OACjB,SAAY,WACZ,OAAU,IACV,KAAQ,IACR,QAAW,QACX,WAAc,oBACd,cAAiB,UAEV,QACfH,EAAAA,EAAAA,KAAA,WAASG,WAAW,QAAQ,gBACpBH,EAAAA,EAAAA,KAAA,UAAQG,WAAW,UACnB,OAAU,CAAC,kFAAmF,kFAAmF,mFACjL,MAAS,kCACT,KAAQ,eACG,gBACXH,EAAAA,EAAAA,KAAA,UAAQG,WAAW,UACnB,OAAU,CAAC,iFAAkF,iFAAkF,kFAC/K,MAAS,kCACT,KAAQ,eACG,gBACXH,EAAAA,EAAAA,KAAA,OAAKG,WAAW,UAChB,UAAa,0BACb,IAAO,4EACP,IAAO,kBACP,MAAS,kBACT,QAAW,OACX,MAAS,CACP,MAAS,OACT,OAAU,OACV,OAAU,IACV,cAAiB,SACjB,SAAY,WACZ,QAAW,IACX,WAAc,eACd,MAAS,UACT,UAAa,+BACb,IAAO,IACP,KAAQ,OAEF,cACC,YAEjBH,EAAAA,EAAAA,KAAA,SAAI,sHACJA,EAAAA,EAAAA,KAAA,YAAKA,EAAAA,EAAAA,KAAA,QAAMG,WAAW,MAClB,UAAa,eACX,yHAENH,EAAAA,EAAAA,KAAA,SAAI,QAAOA,EAAAA,EAAAA,KAAA,cAAYG,WAAW,KAAK,UAAuB,uEAAsEH,EAAAA,EAAAA,KAAA,cAAYG,WAAW,KAAK,sBAAmC,gLACnMH,EAAAA,EAAAA,KAAA,YAAKA,EAAAA,EAAAA,KAAA,QAAMG,WAAW,MAClB,UAAa,iBACX,gHAQNH,EAAAA,EAAAA,KAAA,SAAI,+DACJA,EAAAA,EAAAA,KAAA,YAAKA,EAAAA,EAAAA,KAAA,QAAMG,WAAW,MAClB,UAAa,eACX,8RAUNH,EAAAA,EAAAA,KAAA,SAAI,qDAAoDA,EAAAA,EAAAA,KAAA,cAAYG,WAAW,KAAK,SAAsB,gDAA+CH,EAAAA,EAAAA,KAAA,cAAYG,WAAW,KAAK,kBAA+B,iIACpNH,EAAAA,EAAAA,KAAA,UAAGA,EAAAA,EAAAA,KAAA,QAAMG,WAAW,IAChB,UAAa,4BACb,MAAS,CACP,SAAY,WACZ,QAAW,QACX,WAAc,OACd,YAAe,OACf,SAAY,UAEZ,YACFH,EAAAA,EAAAA,KAAA,QAAMG,WAAW,OACf,UAAa,qCACb,MAAS,CACP,cAAiB,OACjB,SAAY,WACZ,OAAU,IACV,KAAQ,IACR,QAAW,QACX,WAAc,oBACd,cAAiB,UAEV,QACfH,EAAAA,EAAAA,KAAA,WAASG,WAAW,QAAQ,gBACpBH,EAAAA,EAAAA,KAAA,UAAQG,WAAW,UACnB,OAAU,CAAC,kFAAmF,kFAAmF,mFACjL,MAAS,kCACT,KAAQ,eACG,gBACXH,EAAAA,EAAAA,KAAA,UAAQG,WAAW,UACnB,OAAU,CAAC,iFAAkF,iFAAkF,kFAC/K,MAAS,kCACT,KAAQ,eACG,gBACXH,EAAAA,EAAAA,KAAA,OAAKG,WAAW,UAChB,UAAa,0BACb,IAAO,4EACP,IAAO,yBACP,MAAS,yBACT,QAAW,OACX,MAAS,CACP,MAAS,OACT,OAAU,OACV,OAAU,IACV,cAAiB,SACjB,SAAY,WACZ,QAAW,IACX,WAAc,eACd,MAAS,UACT,UAAa,+BACb,IAAO,IACP,KAAQ,OAEF,cACC,YAEjBH,EAAAA,EAAAA,KAAA,MACE,GAAM,cACJ,eACJA,EAAAA,EAAAA,KAAA,SAAI,wCAAyC,IAAK,UAAW,IAAK,oEAAmEA,EAAAA,EAAAA,KAAA,KAAGG,WAAW,IAC/I,KAAQ,0HACN,qBAAyB,sDAGnC,CAEAT,EAAWU,gBAAiB,C","sources":["webpack://dev-site-documentation-template/./src/pages/guides/tutorials/using-the-sdk.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/ff-services-docs/ff-services-docs/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"getting-started-with-the-firefly-services-sdk\"\n    }}>{`Getting Started with the Firefly Services SDK`}</h1>\n    <p>{`As a developer, you have the flexibility to choose how you want to integrate with Firefly Services, tailoring the experience to your specific needs and preferences. `}</p>\n    <h2 {...{\n      \"id\": \"overview\"\n    }}>{`Overview`}</h2>\n    <p>{`Whether you prefer the direct control and language-specific implementations provided by `}<a parentName=\"p\" {...{\n        \"href\": \"../../firefly-api/guides/api/image_generation/V3/\"\n      }}>{`REST APIs`}</a>{` or the simplified, streamlined approach offered by our `}<a parentName=\"p\" {...{\n        \"href\": \"https://developer.adobe.com/firefly-services/docs/guides/sdks/\"\n      }}>{`Node SDK`}</a>{`, Firefly Services has you covered.`}</p>\n    <h2 {...{\n      \"id\": \"choosing-the-right-approach-for-your-project\"\n    }}>{`Choosing the Right Approach for Your Project`}</h2>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`When to Use REST APIs`}</strong>{`: If you need maximum flexibility, detailed control, and are working in a language other than JavaScript/TypeScript, direct REST API access might be the best choice for you.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`When to Use the Node SDK`}</strong>{`: If you're working in a `}<inlineCode parentName=\"p\">{`Node.js`}</inlineCode>{` environment and want to simplify the integration process, reduce boilerplate code, and speed up development, the Node SDK is the way to go.\nBy offering both direct REST API access and a Node SDK, Firefly Services ensures that you have the tools you need to build powerful integrations in the way that best suits your workflow. `}</p>\n      </li>\n    </ul>\n    <p>{`Let's explore what you need to get started with your first integration.`}</p>\n    <p>{`The SDK supports Node.js and either JavaScript or TypeScript. While this article will focus on Firefly APIs, the SDK also includes Photoshop and Lightroom APIs.`}</p>\n    <h2 {...{\n      \"id\": \"prerequisites\"\n    }}>{`Prerequisites`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`You will need a set of credentials for Firefly Services. You can get those `}<a parentName=\"li\" {...{\n          \"href\": \"../get-started.md\"\n        }}>{`here`}</a>{`.`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"the-workflow\"\n    }}>{`The Workflow`}</h2>\n    <p>{`Before digging into the code, let's break down the process.`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Add the SDK packages`}</li>\n      <li parentName=\"ol\">{`Setting up authentication`}</li>\n      <li parentName=\"ol\">{`Instantiate Firefly`}</li>\n      <li parentName=\"ol\">{`Generating an Image with a Prompt`}</li>\n      <li parentName=\"ol\">{`Download the Results`}</li>\n    </ol>\n    <h2 {...{\n      \"id\": \"step-1-add-the-sdk-packages\"\n    }}>{`Step 1: Add the SDK packages`}</h2>\n    <p>{`Let's begin by initializing a new `}<inlineCode parentName=\"p\">{`package.json`}</inlineCode>{` in your prompt with `}<inlineCode parentName=\"p\">{`npm init -y`}</inlineCode>{`. `}</p>\n    <p>{`Next, you need to add the SDK. As described in the SDK's `}<a parentName=\"p\" {...{\n        \"href\": \"https://git.corp.adobe.com/cc-apis/firefly-services-sdk-js/\"\n      }}>{`readme`}</a>{`, there are four individual packages you `}<em parentName=\"p\">{`can`}</em>{` install:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`The `}<inlineCode parentName=\"li\">{`common APIs`}</inlineCode>{` package is required for authentication, you'll always need this.`}</li>\n      <li parentName=\"ul\">{`A package for Firefly API.`}</li>\n      <li parentName=\"ul\">{`A package for Photoshop API.`}</li>\n      <li parentName=\"ul\">{`A package for Lightroom API.`}</li>\n    </ul>\n    <p>{`For your needs, you only require the common and Firefly APIs. Install them like so:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`npm install @adobe/firefly-services-common-apis\nnpm install @adobe/firefly-apis\n`}</code></pre>\n    <p>{`Lastly, in order to use top-level await and imports, add a `}<inlineCode parentName=\"p\">{`type`}</inlineCode>{` setting of `}<inlineCode parentName=\"p\">{`module`}</inlineCode>{` to your package.json. Here's a complete example for reference:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"name\": \"code\",\n  \"version\": \"1.0.0\",\n  \"type\":\"module\",\n  \"description\": \"\",\n  \"main\": \"firefly.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\\\"Error: no test specified\\\\\" && exit 1\"\n  },\n  \"keywords\": [],\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"dependencies\": {\n    \"@adobe/firefly-apis\": \"^1.0.0\",\n    \"@adobe/firefly-services-common-apis\": \"^1.0.0\"\n  }\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"step-2-setting-up-authentication\"\n    }}>{`Step 2: Setting up Authentication`}</h2>\n    <p>{`Let's begin with a simple example, generating an image from a prompt. Our code needs to begin with authentication and creating the Firefly object:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`import { FireflyClient } from '@adobe/firefly-apis';\n\nconst authOptions = {\n    autoRefresh: true,\n    serviceEnvironment:'stage'\n};\n\nconst firefly = await FireflyClient.createWithCredentials(process.env.CLIENT_ID, process.env.CLIENT_SECRET, authOptions);\n`}</code></pre>\n    <p>{`In the code above, you need to use two environment variables (`}<inlineCode parentName=\"p\">{`CLIENT_ID`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`CLIENT_SECRET`}</inlineCode>{`) and pass them to the `}<inlineCode parentName=\"p\">{`createWithCredentials`}</inlineCode>{` method. Note that for the bug bash, the `}<inlineCode parentName=\"p\">{`authOptions`}</inlineCode>{` object specified above is required.`}</p>\n    <h2 {...{\n      \"id\": \"step-3-instantiate-firefly\"\n    }}>{`Step 3: Instantiate Firefly`}</h2>\n    <p>{`The next part is much more simple, creating an instance of the Firefly SDK:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`import { FireflyClient } from '@adobe/firefly-apis';\n\nconst firefly = new FireflyClient(config);\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"step-4-generating-an-image-with-a-prompt\"\n    }}>{`Step 4: Generating an Image with a Prompt`}</h2>\n    <p>{`With authentication done and the Firefly client created, how do you generate images for a prompt? It takes all of one line!`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`const resp = await firefly.generateImages({prompt:'a cat riding a unicorn headed into the sunset, dramatic pose'});\n`}</code></pre>\n    <p>{`As a reminder, the Firefly API can accept `}<em parentName=\"p\">{`many`}</em>{` parameters, and they're all supported by the SDK, but in this case, you have passed just a prompt and the number of images required. The result of the SDK call is twofold - first a `}<inlineCode parentName=\"p\">{`result`}</inlineCode>{` JSON object that matches what the REST API returns, and secondly a set of `}<inlineCode parentName=\"p\">{`headers`}</inlineCode>{` you can inspect if needed.`}</p>\n    <p>{`Here's the JSON returned in the `}<inlineCode parentName=\"p\">{`result`}</inlineCode>{` key:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n        \"size\": {\n                \"width\": 2048,\n                \"height\": 2048\n        },\n        \"outputs\": [\n                {\n                        \"seed\": 85987617,\n                        \"image\": {\n                                \"url\": \"https://pre-signed-firefly-stage.s3-accelerate.amazonaws.com/images/2df5e7ac-cd6a-42c1-b407-e9c316006a55?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIA55EBG7KCZFCHQDZT%2F20240606%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240606T144529Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=cbcdb705aa5f2ceeefb524c31b96715381f1f8e5980126f5051b7b289bfc31e3\"\n                        }\n                }\n        ],\n        \"contentClass\": \"photo\"\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"step-5-download-the-results\"\n    }}>{`Step 5: Download the Results`}</h2>\n    <p>{`Currently, the SDK doesn't support downloading the images for you, but this can be done with a few lines of code. Here's the required import and a basic utility function to download a URL to a path:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`import fs from 'fs';\nimport { Readable } from 'stream';\nimport { finished } from 'stream/promises';\n\nasync function downloadFile(url, filePath) {\n    let res = await fetch(url);\n    const body = Readable.fromWeb(res.body);\n    const download_write_stream = fs.createWriteStream(filePath);\n    return await finished(body.pipe(download_write_stream));\n}\n`}</code></pre>\n    <p>{`To put it all together, here's a complete script that handles the authentication, generating images based on our prompt, and then saving each result to the file system using the results `}<inlineCode parentName=\"p\">{`seed`}</inlineCode>{` value.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`import fs from 'fs';\nimport { Readable } from 'stream';\nimport { finished } from 'stream/promises';\n\nimport { FireflyClient } from '@adobe/firefly-apis';\n\nasync function downloadFile(url, filePath) {\n    let res = await fetch(url);\n    const body = Readable.fromWeb(res.body);\n    const download_write_stream = fs.createWriteStream(filePath);\n    return await finished(body.pipe(download_write_stream));\n}\n\nconst authOptions = {\n    autoRefresh: true,\n    serviceEnvironment:'stage'\n};\n\nconst firefly = await FireflyClient.createWithCredentials(process.env.CLIENT_ID, process.env.CLIENT_SECRET, authOptions);\n\nconst resp = await firefly.generateImages({prompt:'a cat riding a unicorn headed into the sunset, dramatic pose', n:4});\n\nfor(let output of resp.result.outputs) {\n    let fileName = \\`./\\${output.seed}.jpg\\`;\n    await downloadFile(output.image.url, fileName);\n}\n\n`}</code></pre>\n    <p>{`And here's one of the sample results of our prompt:`}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"650px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"100%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\",\n            \"transition\": \"opacity 0.5s 0.5s\",\n            \"pointerEvents\": \"none\"\n          }\n        }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/d130aa111445e15c40ed54570c2f718f/5530d/shot1.webp 320w\", \"/ff-services-docs/static/d130aa111445e15c40ed54570c2f718f/0c8fb/shot1.webp 640w\", \"/ff-services-docs/static/d130aa111445e15c40ed54570c2f718f/309d5/shot1.webp 650w\"],\n            \"sizes\": \"(max-width: 650px) 100vw, 650px\",\n            \"type\": \"image/webp\"\n          }}></source>{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/d130aa111445e15c40ed54570c2f718f/8980b/shot1.jpg 320w\", \"/ff-services-docs/static/d130aa111445e15c40ed54570c2f718f/56d4e/shot1.jpg 640w\", \"/ff-services-docs/static/d130aa111445e15c40ed54570c2f718f/8ea4d/shot1.jpg 650w\"],\n            \"sizes\": \"(max-width: 650px) 100vw, 650px\",\n            \"type\": \"image/jpeg\"\n          }}></source>{`\n          `}<img parentName=\"picture\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"src\": \"/ff-services-docs/static/d130aa111445e15c40ed54570c2f718f/8ea4d/shot1.jpg\",\n            \"alt\": \"Prompt generated image\",\n            \"title\": \"Prompt generated image\",\n            \"loading\": \"lazy\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"opacity\": \"0\",\n              \"transition\": \"opacity 0.5s\",\n              \"color\": \"inherit\",\n              \"boxShadow\": \"inset 0px 0px 0px 400px none\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            }\n          }}></img>{`\n        `}</picture>{`\n    `}</span></p>\n    <h2 {...{\n      \"id\": \"additional-workflow-working-with-reference-images\"\n    }}>{`Additional workflow: Working with Reference Images`}</h2>\n    <p>{`One of the benefits of having a Firefly SDK is how easy it is to build more complex workflows. To demonstrate a simple example of this, let's enhance our simple text-to-image prompt example by using a reference image. Reference images help guide the visual style of the generated result.`}</p>\n    <p>{`In order for this to work, you first need your reference image. You can use this:`}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"650px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"100%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\",\n            \"transition\": \"opacity 0.5s 0.5s\",\n            \"pointerEvents\": \"none\"\n          }\n        }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/d130aa111445e15c40ed54570c2f718f/5530d/shot1.webp 320w\", \"/ff-services-docs/static/d130aa111445e15c40ed54570c2f718f/0c8fb/shot1.webp 640w\", \"/ff-services-docs/static/d130aa111445e15c40ed54570c2f718f/309d5/shot1.webp 650w\"],\n            \"sizes\": \"(max-width: 650px) 100vw, 650px\",\n            \"type\": \"image/webp\"\n          }}></source>{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/d130aa111445e15c40ed54570c2f718f/8980b/shot1.jpg 320w\", \"/ff-services-docs/static/d130aa111445e15c40ed54570c2f718f/56d4e/shot1.jpg 640w\", \"/ff-services-docs/static/d130aa111445e15c40ed54570c2f718f/8ea4d/shot1.jpg 650w\"],\n            \"sizes\": \"(max-width: 650px) 100vw, 650px\",\n            \"type\": \"image/jpeg\"\n          }}></source>{`\n          `}<img parentName=\"picture\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"src\": \"/ff-services-docs/static/d130aa111445e15c40ed54570c2f718f/8ea4d/shot1.jpg\",\n            \"alt\": \"Generated image\",\n            \"title\": \"Generated image\",\n            \"loading\": \"lazy\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"opacity\": \"0\",\n              \"transition\": \"opacity 0.5s\",\n              \"color\": \"inherit\",\n              \"boxShadow\": \"inset 0px 0px 0px 400px none\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            }\n          }}></img>{`\n        `}</picture>{`\n    `}</span></p>\n    <p>{`Skipping over the authentication bits that is already covered, the first change is to upload our reference image:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`const uploadResp = await firefly.upload(new Blob([await fs.readFile('./source_image.jpg')],{type:'image/jpeg'}));\n`}</code></pre>\n    <p>{`The `}<inlineCode parentName=\"p\">{`upload`}</inlineCode>{` SDK method requires a Blob which is wrapped around a file read on `}<inlineCode parentName=\"p\">{`./source_image.jpg`}</inlineCode>{`. As with the previous SDK example, the response includes a JSON result as well as the headers, with the JSON matching what you get when using the REST API. As an example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n    \"images\": [\n        {\n        \"id\": \"9f54159b-f0e9-4696-b4f5-f543a3fb90c0\"\n        }\n    ]\n}\n`}</code></pre>\n    <p>{`Using that reference when generating images looks like so:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`const resp = await firefly.generateImages({\n    prompt:'a cat riding a unicorn headed into the sunset, dramatic pose',      style: {\n        imageReference: {\n            source: {\n                uploadId:uploadResp.result.images[0].id\n            }\n        }\n    }\n});\n`}</code></pre>\n    <p>{`Compared to the previous version of the SDK, the `}<inlineCode parentName=\"p\">{`style`}</inlineCode>{` attribute has been added and passed in the `}<inlineCode parentName=\"p\">{`imageReference`}</inlineCode>{` value. The changes to the generated images are immediately recognizable as being based on the style of the reference image.`}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"650px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"100%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\",\n            \"transition\": \"opacity 0.5s 0.5s\",\n            \"pointerEvents\": \"none\"\n          }\n        }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/de3a55c6fdbfea7694f2e68a798f71c3/5530d/shot2.webp 320w\", \"/ff-services-docs/static/de3a55c6fdbfea7694f2e68a798f71c3/0c8fb/shot2.webp 640w\", \"/ff-services-docs/static/de3a55c6fdbfea7694f2e68a798f71c3/309d5/shot2.webp 650w\"],\n            \"sizes\": \"(max-width: 650px) 100vw, 650px\",\n            \"type\": \"image/webp\"\n          }}></source>{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/de3a55c6fdbfea7694f2e68a798f71c3/8980b/shot2.jpg 320w\", \"/ff-services-docs/static/de3a55c6fdbfea7694f2e68a798f71c3/56d4e/shot2.jpg 640w\", \"/ff-services-docs/static/de3a55c6fdbfea7694f2e68a798f71c3/8ea4d/shot2.jpg 650w\"],\n            \"sizes\": \"(max-width: 650px) 100vw, 650px\",\n            \"type\": \"image/jpeg\"\n          }}></source>{`\n          `}<img parentName=\"picture\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"src\": \"/ff-services-docs/static/de3a55c6fdbfea7694f2e68a798f71c3/8ea4d/shot2.jpg\",\n            \"alt\": \"Second generated image\",\n            \"title\": \"Second generated image\",\n            \"loading\": \"lazy\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"opacity\": \"0\",\n              \"transition\": \"opacity 0.5s\",\n              \"color\": \"inherit\",\n              \"boxShadow\": \"inset 0px 0px 0px 400px none\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            }\n          }}></img>{`\n        `}</picture>{`\n    `}</span></p>\n    <h2 {...{\n      \"id\": \"next-steps\"\n    }}>{`Next Steps`}</h2>\n    <p>{`Now that you've seen how the SDK can `}{`*`}{`greatly`}{`*`}{` simplify your Firefly Services workflows, take a look over the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/Firefly-Services/firefly-services-sdk-jshttps://github.com/Firefly-Services/firefly-services-sdk-js\"\n      }}>{`Github repository`}</a>{` and check out the docs and other samples as well.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","_ref","components","props","_objectWithoutProperties","_excluded","mdx","_extends","mdxType","parentName","isMDXComponent"],"sourceRoot":""}