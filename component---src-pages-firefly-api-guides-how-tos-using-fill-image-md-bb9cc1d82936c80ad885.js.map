{"version":3,"file":"component---src-pages-firefly-api-guides-how-tos-using-fill-image-md-bb9cc1d82936c80ad885.js","mappings":"0TAMaA,EAAe,CAAC,EAKvBC,GAJgBC,EAIY,cAJJ,SAA6BC,GAEzD,OADAC,QAAQC,KAAK,aAAeH,EAAO,4EAC5BI,EAAAA,EAAAA,KAAA,MAASH,EAClB,GAHsBD,MAKtB,MAAMK,EAAc,CAClBP,gBAEIQ,EAAYC,EAAAA,EACH,SAASC,EAAUC,GAG/B,IAHgC,WACjCC,GAEDD,EADIR,GAAKU,EAAAA,EAAAA,GAAAF,EAAAG,GAER,OAAOR,EAAAA,EAAAA,KAACE,GAASO,EAAAA,EAAAA,GAAA,GAAKR,EAAiBJ,EAAK,CAAES,WAAYA,EAAYI,QAAQ,eAG5EV,EAAAA,EAAAA,KAAA,MACE,GAAM,oCACJ,qCACJA,EAAAA,EAAAA,KAAA,SAAI,iEACJA,EAAAA,EAAAA,KAAA,MACE,GAAM,gBACJ,iBACJA,EAAAA,EAAAA,KAAA,SAAI,wUAAuUA,EAAAA,EAAAA,KAAA,KAAGW,WAAW,IACrV,KAAQ,8BACN,oBAAwB,MAC9BX,EAAAA,EAAAA,KAAA,MACE,GAAM,iBACJ,kBACJA,EAAAA,EAAAA,KAAA,WACEA,EAAAA,EAAAA,KAAA,MAAIW,WAAW,MAAM,0FAAyFX,EAAAA,EAAAA,KAAA,KAAGW,WAAW,KACxH,KAAQ,kCACN,mBAAuB,uBAAsBX,EAAAA,EAAAA,KAAA,cAAYW,WAAW,MAAM,aAA0B,SAAQX,EAAAA,EAAAA,KAAA,cAAYW,WAAW,MAAM,iBAA8B,MAC7KX,EAAAA,EAAAA,KAAA,MAAIW,WAAW,MAAM,iEAAgEX,EAAAA,EAAAA,KAAA,cAAYW,WAAW,MAAM,cAA2B,MAAKX,EAAAA,EAAAA,KAAA,UAAQW,WAAW,MAAM,SAAkB,kDAAiDX,EAAAA,EAAAA,KAAA,KAAGW,WAAW,KACxP,KAAQ,+BACN,qBAAyB,oEAAmEX,EAAAA,EAAAA,KAAA,KAAGW,WAAW,KAC5G,KAAQ,kEACN,OAAW,OAEnBX,EAAAA,EAAAA,KAAA,MACE,GAAM,2BACJ,4BACJA,EAAAA,EAAAA,KAAA,SAAI,+FACJA,EAAAA,EAAAA,KAAA,WACEA,EAAAA,EAAAA,KAAA,MAAIW,WAAW,MAAM,0MAAyMX,EAAAA,EAAAA,KAAA,KAAGW,WAAW,KACxO,KAAQ,wBACN,sBAA0B,MAChCX,EAAAA,EAAAA,KAAA,MAAIW,WAAW,MAAM,uBAAsBX,EAAAA,EAAAA,KAAA,MAAIW,WAAW,MAAM,UAAe,wFAC/EX,EAAAA,EAAAA,KAAA,MAAIW,WAAW,MAAM,YAAWX,EAAAA,EAAAA,KAAA,MAAIW,WAAW,MAAM,cAAmB,eAAcX,EAAAA,EAAAA,KAAA,cAAYW,WAAW,MAAM,UAAuB,wHAE5IX,EAAAA,EAAAA,KAAA,MACE,GAAM,0BACJ,2BACJA,EAAAA,EAAAA,KAAA,SAAI,qEAAoEA,EAAAA,EAAAA,KAAA,KAAGW,WAAW,IAClF,KAAQ,wBACN,wBAA4B,MAClCX,EAAAA,EAAAA,KAAA,MACE,GAAM,gBACJ,iBACJA,EAAAA,EAAAA,KAAA,UAAGA,EAAAA,EAAAA,KAAA,QAAMW,WAAW,IAChB,UAAa,4BACb,MAAS,CACP,SAAY,WACZ,QAAW,QACX,WAAc,OACd,YAAe,OACf,SAAY,UAEZ,YACFX,EAAAA,EAAAA,KAAA,QAAMW,WAAW,OACf,UAAa,qCACb,MAAS,CACP,cAAiB,MACjB,SAAY,WACZ,OAAU,IACV,KAAQ,IACR,QAAW,QACX,WAAc,oBACd,cAAiB,UAEV,QACfX,EAAAA,EAAAA,KAAA,WAASW,WAAW,QAAQ,gBACpBX,EAAAA,EAAAA,KAAA,UAAQW,WAAW,UACnB,OAAU,CAAC,4FAA6F,6FACxG,MAAS,kCACT,KAAQ,eACG,gBACXX,EAAAA,EAAAA,KAAA,UAAQW,WAAW,UACnB,OAAU,CAAC,2FAA4F,4FACvG,MAAS,kCACT,KAAQ,cACG,gBACXX,EAAAA,EAAAA,KAAA,OAAKW,WAAW,UAChB,UAAa,0BACb,IAAO,sFACP,IAAO,eACP,MAAS,eACT,QAAW,OACX,MAAS,CACP,MAAS,OACT,OAAU,OACV,OAAU,IACV,cAAiB,SACjB,SAAY,WACZ,QAAW,IACX,WAAc,eACd,MAAS,UACT,UAAa,+BACb,IAAO,IACP,KAAQ,OAEF,cACC,YAEjBX,EAAAA,EAAAA,KAAA,MACE,GAAM,cACJ,eACJA,EAAAA,EAAAA,KAAA,UAAGA,EAAAA,EAAAA,KAAA,QAAMW,WAAW,IAChB,UAAa,4BACb,MAAS,CACP,SAAY,WACZ,QAAW,QACX,WAAc,OACd,YAAe,OACf,SAAY,UAEZ,YACFX,EAAAA,EAAAA,KAAA,QAAMW,WAAW,OACf,UAAa,qCACb,MAAS,CACP,cAAiB,MACjB,SAAY,WACZ,OAAU,IACV,KAAQ,IACR,QAAW,QACX,WAAc,oBACd,cAAiB,UAEV,QACfX,EAAAA,EAAAA,KAAA,WAASW,WAAW,QAAQ,gBACpBX,EAAAA,EAAAA,KAAA,UAAQW,WAAW,UACnB,OAAU,CAAC,0FAA2F,2FACtG,MAAS,kCACT,KAAQ,eACG,gBACXX,EAAAA,EAAAA,KAAA,UAAQW,WAAW,UACnB,OAAU,CAAC,yFAA0F,0FACrG,MAAS,kCACT,KAAQ,cACG,gBACXX,EAAAA,EAAAA,KAAA,OAAKW,WAAW,UAChB,UAAa,0BACb,IAAO,oFACP,IAAO,aACP,MAAS,aACT,QAAW,OACX,MAAS,CACP,MAAS,OACT,OAAU,OACV,OAAU,IACV,cAAiB,SACjB,SAAY,WACZ,QAAW,IACX,WAAc,eACd,MAAS,UACT,UAAa,+BACb,IAAO,IACP,KAAQ,OAEF,cACC,YAEjBX,EAAAA,EAAAA,KAAA,UAAGA,EAAAA,EAAAA,KAAA,UAAQW,WAAW,KAAK,SAAkB,8bAC7CX,EAAAA,EAAAA,KAAA,MACE,GAAM,8BACJ,+BACJA,EAAAA,EAAAA,KAAA,SAAI,6DAA4DA,EAAAA,EAAAA,KAAA,KAAGW,WAAW,IAC1E,KAAQ,2BACN,kBAAsB,eAC5BX,EAAAA,EAAAA,KAAA,YAAKA,EAAAA,EAAAA,KAAA,QAAMW,WAAW,MAClB,UAAa,iBACX,wNAgBNX,EAAAA,EAAAA,KAAA,SAAI,uDAAsDA,EAAAA,EAAAA,KAAA,KAAGW,WAAW,IACpE,KAAQ,6BACN,iBAAqB,0CAAyCX,EAAAA,EAAAA,KAAA,KAAGW,WAAW,IAC9E,KAAQ,iEACN,sDAA0D,4CAChEX,EAAAA,EAAAA,KAAA,SAAI,yEAAwEA,EAAAA,EAAAA,KAAA,KAAGW,WAAW,IACtF,KAAQ,6BACN,kBAAsB,MAC5BX,EAAAA,EAAAA,KAAA,YAAKA,EAAAA,EAAAA,KAAA,QAAMW,WAAW,MAClB,UAAa,eACX,muBAgCNX,EAAAA,EAAAA,KAAA,SAAI,mHAAkHA,EAAAA,EAAAA,KAAA,cAAYW,WAAW,KAAK,oBAAiC,wDAAuDX,EAAAA,EAAAA,KAAA,KAAGW,WAAW,IACpP,KAAQ,wBACN,sBAA0B,2BAA0BX,EAAAA,EAAAA,KAAA,cAAYW,WAAW,KAAK,iBAA8B,4CAA2CX,EAAAA,EAAAA,KAAA,cAAYW,WAAW,KAAK,YAAyB,uFAAsFX,EAAAA,EAAAA,KAAA,cAAYW,WAAW,KAAK,aAA0B,gDAA+CX,EAAAA,EAAAA,KAAA,KAAGW,WAAW,IACzZ,KAAQ,yBACN,wBAA4B,uBAClCX,EAAAA,EAAAA,KAACL,EAAW,CAACiB,QAAQ,UAAUC,MAAM,cAAcH,QAAQ,iBAC3DV,EAAAA,EAAAA,KAAA,SAAI,QACJA,EAAAA,EAAAA,KAAA,SAAI,kCAAiCA,EAAAA,EAAAA,KAAA,KAAGW,WAAW,IAC/C,KAAQ,yCACN,yCAA6C,mHAAkHX,EAAAA,EAAAA,KAAA,cAAYW,WAAW,KAAK,oBAAiC,8CAA6CX,EAAAA,EAAAA,KAAA,cAAYW,WAAW,KAAK,iBAA8B,kDAAiDX,EAAAA,EAAAA,KAAA,cAAYW,WAAW,KAAK,kBAA+B,OACrbX,EAAAA,EAAAA,KAAA,SAAI,6GACJA,EAAAA,EAAAA,KAAA,YAAKA,EAAAA,EAAAA,KAAA,QAAMW,WAAW,MAClB,UAAa,eACX,mUAWNX,EAAAA,EAAAA,KAAA,SAAI,oFAAmFA,EAAAA,EAAAA,KAAA,cAAYW,WAAW,KAAK,aAA0B,+BAA8BX,EAAAA,EAAAA,KAAA,cAAYW,WAAW,KAAK,uBAAoC,oCAAmCX,EAAAA,EAAAA,KAAA,cAAYW,WAAW,KAAK,kBAA+B,4CAA2CX,EAAAA,EAAAA,KAAA,KAAGW,WAAW,IAC9X,KAAQ,yBACN,wBAA4B,gBAClCX,EAAAA,EAAAA,KAAA,YAAKA,EAAAA,EAAAA,KAAA,QAAMW,WAAW,MAClB,UAAa,eACX,qNAINX,EAAAA,EAAAA,KAAA,MACE,GAAM,oBACJ,qBACJA,EAAAA,EAAAA,KAAA,UAAGA,EAAAA,EAAAA,KAAA,QAAMW,WAAW,IAChB,UAAa,4BACb,MAAS,CACP,SAAY,WACZ,QAAW,QACX,WAAc,OACd,YAAe,OACf,SAAY,UAEZ,YACFX,EAAAA,EAAAA,KAAA,QAAMW,WAAW,OACf,UAAa,qCACb,MAAS,CACP,cAAiB,MACjB,SAAY,WACZ,OAAU,IACV,KAAQ,IACR,QAAW,QACX,WAAc,oBACd,cAAiB,UAEV,QACfX,EAAAA,EAAAA,KAAA,WAASW,WAAW,QAAQ,gBACpBX,EAAAA,EAAAA,KAAA,UAAQW,WAAW,UACnB,OAAU,CAAC,qFAAsF,sFACjG,MAAS,kCACT,KAAQ,eACG,gBACXX,EAAAA,EAAAA,KAAA,UAAQW,WAAW,UACnB,OAAU,CAAC,oFAAqF,qFAChG,MAAS,kCACT,KAAQ,eACG,gBACXX,EAAAA,EAAAA,KAAA,OAAKW,WAAW,UAChB,UAAa,0BACb,IAAO,+EACP,IAAO,yBACP,MAAS,yBACT,QAAW,OACX,MAAS,CACP,MAAS,OACT,OAAU,OACV,OAAU,IACV,cAAiB,SACjB,SAAY,WACZ,QAAW,IACX,WAAc,eACd,MAAS,UACT,UAAa,+BACb,IAAO,IACP,KAAQ,OAEF,cACC,YAEjBX,EAAAA,EAAAA,KAAA,UAAGA,EAAAA,EAAAA,KAAA,UAAQW,WAAW,KAAK,SAAkB,8JAC7CX,EAAAA,EAAAA,KAAA,MACE,GAAM,wBACJ,yBACJA,EAAAA,EAAAA,KAAA,SAAI,oHACJA,EAAAA,EAAAA,KAACL,EAAW,CAACiB,QAAQ,UAAUC,MAAM,cAAcH,QAAQ,iBAC3DV,EAAAA,EAAAA,KAAA,SAAI,cACJA,EAAAA,EAAAA,KAAA,SAAI,gDAA+CA,EAAAA,EAAAA,KAAA,cAAYW,WAAW,KAAK,SAAsB,iCAAgCX,EAAAA,EAAAA,KAAA,cAAYW,WAAW,KAAK,QAAqB,yDAAwDX,EAAAA,EAAAA,KAAA,cAAYW,WAAW,KAAK,gBAA6B,UAASX,EAAAA,EAAAA,KAAA,cAAYW,WAAW,KAAK,kBAA+B,MAC3WX,EAAAA,EAAAA,KAAA,YAAKA,EAAAA,EAAAA,KAAA,QAAMW,WAAW,MAClB,UAAa,eACX,g4FAsGNX,EAAAA,EAAAA,KAAA,MACE,GAAM,cACJ,eACJA,EAAAA,EAAAA,KAAA,SAAI,+FAA8FA,EAAAA,EAAAA,KAAA,KAAGW,WAAW,IAC5G,KAAQ,eACN,WAAe,qBAAoBX,EAAAA,EAAAA,KAAA,KAAGW,WAAW,IACnD,KAAQ,+BACN,iBAAqB,sBAG/B,CAEAP,EAAWU,gBAAiB,C","sources":["webpack://dev-site-documentation-template/./src/pages/firefly-api/guides/how-tos/using-fill-image.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/ff-services-docs/ff-services-docs/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"using-the-firefly-fill-image-api\"\n    }}>{`Using the Firefly Fill Image API`}</h1>\n    <p>{`Learn how to use the Fill Image API in your code workflows. `}</p>\n    <h2 {...{\n      \"id\": \"introduction\"\n    }}>{`Introduction`}</h2>\n    <p>{`Generative Fill is a powerful Firefly feature that lets designers modify an existing image using AI to replace a portion of an image with generated content. The content replaced might be a small portion of an image, or an entire background behind a central object. In this guide, you will see how this can be done using the `}<a parentName=\"p\" {...{\n        \"href\": \"../api/generative_fill/V3/\"\n      }}>{`Firefly Fill API`}</a>{`.`}</p>\n    <h2 {...{\n      \"id\": \"prerequisites\"\n    }}>{`Prerequisites`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`Firefly API credentials. If you don't have them yet, first visit the Firefly Services `}<a parentName=\"li\" {...{\n          \"href\": \"../../../guides/get-started.md\"\n        }}>{`Getting Started`}</a>{` guide to obtain a `}<inlineCode parentName=\"li\">{`client_id`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`client_secret`}</inlineCode>{`.`}</li>\n      <li parentName=\"ul\">{`Node.js installed on your machine and basic familiarity with `}<inlineCode parentName=\"li\">{`JavaScript`}</inlineCode>{`. `}<strong parentName=\"li\">{`Note:`}</strong>{` The code for this guide will make use of the `}<a parentName=\"li\" {...{\n          \"href\": \"../api/image_generation/V3/\"\n        }}>{`Firefly REST APIs`}</a>{` via Node.js, but could be written in any language, or with the `}<a parentName=\"li\" {...{\n          \"href\": \"https://developer.adobe.com/firefly-services/docs/guides/sdks/\"\n        }}>{`SDK`}</a>{`.`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"fill-image-api-overview\"\n    }}>{`Fill Image API Overview`}</h2>\n    <p>{`Before getting into the code, let's consider how the Fill Image API works at a high level.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`You begin with a source image, which can either be uploaded to Firefly Services, or used with one of the supported cloud storage providers. For this guide, you'll use a local image uploaded via the `}<a parentName=\"li\" {...{\n          \"href\": \"../api/upload_image/\"\n        }}>{`Firefly Upload API`}</a>{`.`}</li>\n      <li parentName=\"ul\">{`You then provide a `}<em parentName=\"li\">{`masked`}</em>{` version of the image. That mask will be where Firefly adds it's generated content.`}</li>\n      <li parentName=\"ul\">{`You can `}<em parentName=\"li\">{`optionally`}</em>{` specify a `}<inlineCode parentName=\"li\">{`prompt`}</inlineCode>{` to help Firefly create the filled region. If not specified, Firefly only uses the source image itself as a guide.`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"source-and-mask-images\"\n    }}>{`Source and Mask Images`}</h2>\n    <p>{`The source and mask images are below, and will be uploaded using `}<a parentName=\"p\" {...{\n        \"href\": \"../api/upload_image/\"\n      }}>{`Firefly's Upload API`}</a>{`.`}</p>\n    <h5 {...{\n      \"id\": \"source-image\"\n    }}>{`Source image`}</h5>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"500px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"75%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\",\n            \"transition\": \"opacity 0.5s 0.5s\",\n            \"pointerEvents\": \"none\"\n          }\n        }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/a9b1e1e9dd93847af5a44d015aa1ec48/5530d/gen-fill-source.webp 320w\", \"/ff-services-docs/static/a9b1e1e9dd93847af5a44d015aa1ec48/601b1/gen-fill-source.webp 500w\"],\n            \"sizes\": \"(max-width: 500px) 100vw, 500px\",\n            \"type\": \"image/webp\"\n          }}></source>{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/a9b1e1e9dd93847af5a44d015aa1ec48/dd4a7/gen-fill-source.png 320w\", \"/ff-services-docs/static/a9b1e1e9dd93847af5a44d015aa1ec48/0eb09/gen-fill-source.png 500w\"],\n            \"sizes\": \"(max-width: 500px) 100vw, 500px\",\n            \"type\": \"image/png\"\n          }}></source>{`\n          `}<img parentName=\"picture\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"src\": \"/ff-services-docs/static/a9b1e1e9dd93847af5a44d015aa1ec48/0eb09/gen-fill-source.png\",\n            \"alt\": \"Source image\",\n            \"title\": \"Source image\",\n            \"loading\": \"lazy\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"opacity\": \"0\",\n              \"transition\": \"opacity 0.5s\",\n              \"color\": \"inherit\",\n              \"boxShadow\": \"inset 0px 0px 0px 400px none\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            }\n          }}></img>{`\n        `}</picture>{`\n    `}</span></p>\n    <h5 {...{\n      \"id\": \"mask-image\"\n    }}>{`Mask image`}</h5>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"500px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"75%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\",\n            \"transition\": \"opacity 0.5s 0.5s\",\n            \"pointerEvents\": \"none\"\n          }\n        }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/258ed7fcb2a70fb986107fb085d64b21/5530d/gen-fill-mask.webp 320w\", \"/ff-services-docs/static/258ed7fcb2a70fb986107fb085d64b21/601b1/gen-fill-mask.webp 500w\"],\n            \"sizes\": \"(max-width: 500px) 100vw, 500px\",\n            \"type\": \"image/webp\"\n          }}></source>{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/258ed7fcb2a70fb986107fb085d64b21/dd4a7/gen-fill-mask.png 320w\", \"/ff-services-docs/static/258ed7fcb2a70fb986107fb085d64b21/0eb09/gen-fill-mask.png 500w\"],\n            \"sizes\": \"(max-width: 500px) 100vw, 500px\",\n            \"type\": \"image/png\"\n          }}></source>{`\n          `}<img parentName=\"picture\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"src\": \"/ff-services-docs/static/258ed7fcb2a70fb986107fb085d64b21/0eb09/gen-fill-mask.png\",\n            \"alt\": \"Mask image\",\n            \"title\": \"Mask image\",\n            \"loading\": \"lazy\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"opacity\": \"0\",\n              \"transition\": \"opacity 0.5s\",\n              \"color\": \"inherit\",\n              \"boxShadow\": \"inset 0px 0px 0px 400px none\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            }\n          }}></img>{`\n        `}</picture>{`\n    `}</span></p>\n    <p><strong parentName=\"p\">{`Note:`}</strong>{` The Photoshop API has a \"Create Mask\" endpoint that can be used to automate the creation of a mask, but at this time, the mask is created in a way that does not yet work with the Firefly Fill Image endpoint. The image mask must be inverted. That could either be done with a second Photoshop API, the ActionJSON endpoint -- or instead, use one ActionJSON call to do both. This is only a temporary limitation, however, and will be fixed soon.`}</p>\n    <h2 {...{\n      \"id\": \"calling-the-fill-image-api\"\n    }}>{`Calling the Fill Image API`}</h2>\n    <p>{`A simple example of the request body required to use the `}<a parentName=\"p\" {...{\n        \"href\": \"../api/generative_fill/\"\n      }}>{`Fill Image API`}</a>{` is below:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"numVariations\": 1,\n  \"size\": {\n    \"width\": 2048,\n    \"height\": 2048\n  },\n  \"image\": {\n    \"source\": {\n      \"uploadId\": \"string\"\n    },\n    \"mask\": {\n      \"uploadId\": \"string\"\n    }\n  }\n}\n`}</code></pre>\n    <p>{`More options are available and may be found in the `}<a parentName=\"p\" {...{\n        \"href\": \"../api/generative_fill/V3\"\n      }}>{`API Reference`}</a>{`. Please note that you could also use `}<a parentName=\"p\" {...{\n        \"href\": \"./using-style-structure-refs.md#working-with-reference-images\"\n      }}>{`cloud storage URLs (in the form of presigned URLs)`}</a>{` instead of uploaded assets as desired.`}</p>\n    <p>{`Below is a sample JavaScript function that could be used to call the `}<a parentName=\"p\" {...{\n        \"href\": \"../api/generative_fill/V3\"\n      }}>{`Fill Image API`}</a>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`async function genFill(maskId, sourceId, width, height, prompt, id, token) {\n\n    let body = {\n        numVariations:1,\n        size:{\n            width,\n            height\n        },\n        prompt,\n        image: {\n            mask: {\n                uploadId: maskId\n            },\n            source: {\n                uploadId: sourceId\n            }   \n        }\n    }\n\n    let req = await fetch('https://firefly-api.adobe.io/v3/images/fill', {\n        method:'POST',\n        headers: {\n            'X-Api-Key':id, \n            'Authorization':\\`Bearer \\${token}\\`,\n            'Content-Type':'application/json'\n        }, \n        body: JSON.stringify(body)\n    });\n\n    return await req.json();\n}\n`}</code></pre>\n    <p>{`This next step requires you to use some utility functions to 1) authenticate and obtain your access token (via `}<inlineCode parentName=\"p\">{`getAccessToken()`}</inlineCode>{`), and 2) upload your source and mask images with a `}<a parentName=\"p\" {...{\n        \"href\": \"../api/upload_image/\"\n      }}>{`Firefly Upload API`}</a>{` wrapper function (ie: `}<inlineCode parentName=\"p\">{`uploadImage()`}</inlineCode>{`). The latter ensures you will have the `}<inlineCode parentName=\"p\">{`uploadId`}</inlineCode>{` needed for both the source and mask images when you are ready to make the call to `}<inlineCode parentName=\"p\">{`genFill()`}</inlineCode>{`. These utility methods are provided in the `}<a parentName=\"p\" {...{\n        \"href\": \"#complete-source-code\"\n      }}>{`complete source code`}</a>{` section for you. `}</p>\n    <InlineAlert variant=\"success\" slots=\"title, text\" mdxType=\"InlineAlert\" />\n    <p>{`TIP`}</p>\n    <p>{`We recommend you refer to the `}<a parentName=\"p\" {...{\n        \"href\": \"./create-your-first-ff-application.md\"\n      }}>{`Create your First Firefly Application`}</a>{` guide for a step-by-step walkthrough on the utility methods used in the how-to guides for authenticating (via `}<inlineCode parentName=\"p\">{`getAccessToken()`}</inlineCode>{`), uploading images for use in the calls (`}<inlineCode parentName=\"p\">{`uploadImage()`}</inlineCode>{`), and for downloading the generated results (`}<inlineCode parentName=\"p\">{`downloadFile()`}</inlineCode>{`).`}</p>\n    <p>{`Below is an example snippet of using the aforementioned utility functions with the necessary parameters:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`let token = await getAccessToken(CLIENT_ID, CLIENT_SECRET);\n\nlet upload = await uploadImage('./gen-fill-mask.png', 'image/png', CLIENT_ID, token);\nlet maskedImage = upload.images[0].id;\n\nupload = await uploadImage('./gen-fill-source.png', 'image/png', CLIENT_ID, token);\nlet sourceImage = upload.images[0].id;\n`}</code></pre>\n    {/* the rest of what you will write the rest of the code needed to actually use the above function to make the fill call. \n     First, you will need to authenticate and obtain your access token, then upload your source and mask images using the [Firefly Upload API](../api/upload_image/) (to ensure you have the `uploadId` needed for each).\n     and then upload our source and mask (again, using a wrapper to Firefly's upload API, which we'll include in the full listing below). Our prompt is, \"a beach at sunset\".  */}\n    <p>{`Now that you have everything needed for the call parameters, make a call to the `}<inlineCode parentName=\"p\">{`genFill()`}</inlineCode>{` function with the prompt: `}<inlineCode parentName=\"p\">{`\"a beach at sunset\"`}</inlineCode>{`, and save the result using the `}<inlineCode parentName=\"p\">{`downloadFile()`}</inlineCode>{` utility function (also provided in the `}<a parentName=\"p\" {...{\n        \"href\": \"#complete-source-code\"\n      }}>{`complete source code`}</a>{` section). `}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`let result = await genFill(maskedImage, sourceImage, 2048, 2048, \"a beach at sunset\", CLIENT_ID, token);\nlet fileName = \\`./output/gen-fill.jpg\\`;\nawait downloadFile(result.outputs[0].image.url, fileName);\n`}</code></pre>\n    <h5 {...{\n      \"id\": \"generated-result\"\n    }}>{`Generated result`}</h5>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"500px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"75%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\",\n            \"transition\": \"opacity 0.5s 0.5s\",\n            \"pointerEvents\": \"none\"\n          }\n        }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/e0860520bc353b946ce4782a4ce44764/5530d/gen-fill.webp 320w\", \"/ff-services-docs/static/e0860520bc353b946ce4782a4ce44764/601b1/gen-fill.webp 500w\"],\n            \"sizes\": \"(max-width: 500px) 100vw, 500px\",\n            \"type\": \"image/webp\"\n          }}></source>{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/ff-services-docs/static/e0860520bc353b946ce4782a4ce44764/8980b/gen-fill.jpg 320w\", \"/ff-services-docs/static/e0860520bc353b946ce4782a4ce44764/953fe/gen-fill.jpg 500w\"],\n            \"sizes\": \"(max-width: 500px) 100vw, 500px\",\n            \"type\": \"image/jpeg\"\n          }}></source>{`\n          `}<img parentName=\"picture\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"src\": \"/ff-services-docs/static/e0860520bc353b946ce4782a4ce44764/953fe/gen-fill.jpg\",\n            \"alt\": \"Result with basic fill\",\n            \"title\": \"Result with basic fill\",\n            \"loading\": \"lazy\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"opacity\": \"0\",\n              \"transition\": \"opacity 0.5s\",\n              \"color\": \"inherit\",\n              \"boxShadow\": \"inset 0px 0px 0px 400px none\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            }\n          }}></img>{`\n        `}</picture>{`\n    `}</span></p>\n    <p><strong parentName=\"p\">{`Note:`}</strong>{` A more detailed prompt would provide better results, and remember that the masked region could be smaller as well, rather than the complete background. `}</p>\n    <h2 {...{\n      \"id\": \"complete-source-code\"\n    }}>{`Complete Source Code`}</h2>\n    <p>{`The complete source code containing utilities for authentication, uploading, and downloading is provided below.`}</p>\n    <InlineAlert variant=\"warning\" slots=\"title, text\" mdxType=\"InlineAlert\" />\n    <p>{`IMPORTANT`}</p>\n    <p>{`The Node.js code uses imports and top-level `}<inlineCode parentName=\"p\">{`await`}</inlineCode>{`, so you must either use the `}<inlineCode parentName=\"p\">{`.mjs`}</inlineCode>{` extension on your script file, or ensure you have a `}<inlineCode parentName=\"p\">{`package.json`}</inlineCode>{` with `}<inlineCode parentName=\"p\">{`type: \"module\"`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`import fs from 'fs';\nimport { Readable } from 'stream';\nimport { finished } from 'stream/promises';\n\n/*\n  Set the credentials based on environment variables.\n*/\nconst CLIENT_ID = process.env.CLIENT_ID;\nconst CLIENT_SECRET = process.env.CLIENT_SECRET;\n\nasync function getAccessToken(id, secret) {\n\n    const params = new URLSearchParams();\n\n    params.append('grant_type', 'client_credentials');\n    params.append('client_id', id);\n    params.append('client_secret', secret);\n    params.append('scope', 'openid,AdobeID,firefly_enterprise,firefly_api,ff_apis');\n    \n    let resp = await fetch('https://ims-na1-stg1.adobelogin.com/ims/token/v3', \n        { \n            method: 'POST', \n            body: params\n        }\n    );\n\n    let data = await resp.json();\n    return data.access_token;\n}\n\nasync function uploadImage(filePath, fileType, id, token) {\n\n    let stream = fs.createReadStream(filePath);\n    let stats = fs.statSync(filePath);\n    let fileSizeInBytes = stats.size;\n\n    let upload = await fetch('https://firefly-api.adobe.io/v2/storage/image', {\n        method:'POST', \n        headers: {\n            'Authorization':\\`Bearer \\${token}\\`, \n            'X-API-Key':id, \n            'Content-Type':fileType, \n            'Content-Length':fileSizeInBytes\n        }, \n        duplex:'half', \n        body:stream\n    });\n\n    return await upload.json();\n}\n\nasync function downloadFile(url, filePath) {\n    let res = await fetch(url);\n    const body = Readable.fromWeb(res.body);\n    const download_write_stream = fs.createWriteStream(filePath);\n    return await finished(body.pipe(download_write_stream));\n}\n\nasync function genFill(maskId, sourceId, width, height, prompt, id, token) {\n\n    let body = {\n        numVariations:1,\n        size:{\n            width,\n            height\n        },\n        prompt,\n        image: {\n            mask: {\n                uploadId: maskId\n            },\n            source: {\n                uploadId: sourceId\n            }   \n        }\n    }\n\n    let req = await fetch('https://firefly-api.adobe.io/v3/images/fill', {\n        method:'POST',\n        headers: {\n            'X-Api-Key':id, \n            'Authorization':\\`Bearer \\${token}\\`,\n            'Content-Type':'application/json'\n        }, \n        body: JSON.stringify(body)\n    });\n\n    return await req.json();\n}\n\nlet token = await getAccessToken(CLIENT_ID, CLIENT_SECRET);\n\nlet upload = await uploadImage('./gen-fill-mask.png', 'image/png', CLIENT_ID, token);\nlet maskedImage = upload.images[0].id;\n\nupload = await uploadImage('./gen-fill-source.png', 'image/png', CLIENT_ID, token);\nlet sourceImage = upload.images[0].id;\n\nlet result = await genFill(maskedImage, sourceImage, 2048, 2048, \"a beach at sunset\", CLIENT_ID, token);\nlet fileName = \\`./output/gen-fill.jpg\\`;\nawait downloadFile(result.outputs[0].image.url, fileName);\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"next-steps\"\n    }}>{`Next Steps`}</h2>\n    <p>{`For more examples of what's possible with Firefly APIs, check out the other guides in this `}<a parentName=\"p\" {...{\n        \"href\": \"../how-tos/\"\n      }}>{`how-tos`}</a>{` section and the `}<a parentName=\"p\" {...{\n        \"href\": \"../api/image_generation/V3/\"\n      }}>{`API Reference`}</a>{` for more details.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","InlineAlert","name","props","console","warn","mdx","layoutProps","MDXLayout","DefaultLayout","MDXContent","_ref","components","_objectWithoutProperties","_excluded","_extends","mdxType","parentName","variant","slots","isMDXComponent"],"sourceRoot":""}